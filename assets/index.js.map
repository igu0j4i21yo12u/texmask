{"version":3,"file":"index.js","sources":["../../src/modules/ui.js","../../src/brand-configs/company.js","../../src/modules/brand.js","../../src/modules/constants.js","../../src/modules/state.js","../../src/modules/io.js","../../masking-engine.js","../../src/modules/unmask.js","../../src/modules/samples.js","../../src/modules/rules.js","../../src/modules/dictionary.js","../../src/modules/address.js","../../src/modules/preset.js","../../patterns.js","../../src/modules/masking.js","../../src/modules/text-dictionary.js","../../src/modules/text-dictionary-ui.js","../../src/main.js"],"sourcesContent":["/**\n * UI Module - DOM要素の参照とUI操作\n */\n\n// DOM要素の参照\nexport const ui = {\n  inputText: document.getElementById(\"inputText\"),\n  outputText: document.getElementById(\"outputText\"),\n  maskForwardBtn: document.getElementById(\"maskForwardBtn\"),\n  unmaskBackwardBtn: document.getElementById(\"unmaskBackwardBtn\"),\n  savePlainTextBtn: document.getElementById(\"savePlainTextBtn\"),\n  plainTextUploadBtn: document.getElementById(\"plainTextUploadBtn\"),\n  plainTextFile: document.getElementById(\"plainTextFile\"),\n  maskedTextUploadBtn: document.getElementById(\"maskedTextUploadBtn\"),\n  unmaskDictUploadBtn: document.getElementById(\"unmaskDictUploadBtn\"),\n  unmaskDictStatus: document.getElementById(\"unmaskDictStatus\"),\n  copyBtn: document.getElementById(\"copyBtn\"),\n  clearBtn: document.getElementById(\"clearBtn\"),\n  sampleSelect: document.getElementById(\"sampleSelect\"),\n  useRandomSessionId: document.getElementById(\"useRandomSessionId\"),\n  regenSessionId: document.getElementById(\"regenSessionId\"),\n  dictDefaultPrefix: document.getElementById(\"dictDefaultPrefix\"),\n  dictRows: document.getElementById(\"dictRows\"),\n  dictAddRow: document.getElementById(\"dictAddRow\"),\n  dictImportBasic: document.getElementById(\"dictImportBasic\"),\n  dictTableStatus: document.getElementById(\"dictTableStatus\"),\n  ruleList: document.getElementById(\"ruleList\"),\n  toggleAllBtn: document.getElementById(\"toggleAllBtn\"),\n  resetOrderBtn: document.getElementById(\"resetOrderBtn\"),\n  presetSelect: document.getElementById(\"presetSelect\"),\n  presetLoad: document.getElementById(\"presetLoad\"),\n  presetDelete: document.getElementById(\"presetDelete\"),\n  presetName: document.getElementById(\"presetName\"),\n  presetSave: document.getElementById(\"presetSave\"),\n  presetDock: document.getElementById(\"presetDock\"),\n  presetToggle: document.getElementById(\"presetToggle\"),\n  presetPanel: document.getElementById(\"presetPanel\"),\n  presetClose: document.getElementById(\"presetClose\"),\n  presetExport: document.getElementById(\"presetExport\"),\n  presetImport: document.getElementById(\"presetImport\"),\n  presetImportFile: document.getElementById(\"presetImportFile\"),\n  presetStatus: document.getElementById(\"presetStatus\"),\n  stats: document.getElementById(\"stats\"),\n  appStats: document.getElementById(\"appStats\"),\n  saveMaskedTextBtn: document.getElementById(\"saveMaskedTextBtn\"),\n  tabs: document.querySelectorAll(\".tab\"),\n  tabPanels: document.querySelectorAll(\".tab-panel\"),\n  useAddressDict: document.getElementById(\"useAddressDict\"),\n  addressDictVersion: document.getElementById(\"addressDictVersion\"),\n  addressDictSource: document.getElementById(\"addressDictSource\"),\n  addressDictCount: document.getElementById(\"addressDictCount\"),\n  addressDictUpdated: document.getElementById(\"addressDictUpdated\"),\n  addressTownDictStatus: document.getElementById(\"addressTownDictStatus\"),\n  addressPrefectureList: document.getElementById(\"addressPrefectureList\"),\n  addressPrefAll: document.getElementById(\"addressPrefAll\"),\n  addressPrefNone: document.getElementById(\"addressPrefNone\"),\n  addressSearchInput: document.getElementById(\"addressSearchInput\"),\n  addressSearchResults: document.getElementById(\"addressSearchResults\"),\n  updateAddressDict: document.getElementById(\"updateAddressDict\"),\n  resetAddressDict: document.getElementById(\"resetAddressDict\"),\n  downloadDictBtn: document.getElementById(\"downloadDictBtn\"),\n  unmaskTextFile: document.getElementById(\"unmaskTextFile\"),\n  unmaskTextDrop: document.getElementById(\"unmaskTextDrop\"),\n  unmaskDictFile: document.getElementById(\"unmaskDictFile\"),\n  unmaskDictDrop: document.getElementById(\"unmaskDictDrop\"),\n  unmaskStats: document.getElementById(\"unmaskStats\"),\n  // Text Dictionary\n  textDictAddBtn: document.getElementById(\"textDictAddBtn\"),\n  textDictForm: document.getElementById(\"textDictForm\"),\n  textDictFormTitle: document.getElementById(\"textDictFormTitle\"),\n  textDictLabel: document.getElementById(\"textDictLabel\"),\n  textDictPriority: document.getElementById(\"textDictPriority\"),\n  textDictContent: document.getElementById(\"textDictContent\"),\n  textDictFileInput: document.getElementById(\"textDictFileInput\"),\n  textDictFileFormatRow: document.getElementById(\"textDictFileFormatRow\"),\n  textDictFileRow: document.getElementById(\"textDictFileRow\"),\n  textDictTextareaRow: document.getElementById(\"textDictTextareaRow\"),\n  textDictInputModeRadios: document.getElementsByName(\"textDictInputMode\"),\n  textDictFileFormatRadios: document.getElementsByName(\"textDictFileFormat\"),\n  textDictCancelBtn: document.getElementById(\"textDictCancelBtn\"),\n  textDictSubmitBtn: document.getElementById(\"textDictSubmitBtn\"),\n  textDictList: document.getElementById(\"textDictList\"),\n  textDictListEmpty: document.getElementById(\"textDictListEmpty\"),\n};\n\n// UI操作関数\nexport function updateStatusDisplay(message, isError = false) {\n  ui.stats.textContent = message;\n  ui.stats.classList.toggle(\"error\", isError);\n}\n\nexport function updateDictTableStatusDisplay(message) {\n  if (!ui.dictTableStatus) {\n    return;\n  }\n  ui.dictTableStatus.textContent = message || \"\";\n}\n\nexport function updatePresetStatusDisplay(message, isError = false) {\n  if (!ui.presetStatus) {\n    return;\n  }\n  ui.presetStatus.textContent = message || \"\";\n  ui.presetStatus.classList.toggle(\"error\", isError);\n}\n","export const brandConfig = {\n  productName: \"TextMasker\",\n  pageTitle: \"TextMasker - 簡単秘匿情報マスキング\",\n  logoText: \"TextMasker\",\n  eyebrow: \"簡単秘匿情報マスキング\",\n  ledeLines: [\n    \"業務で扱う機密情報を、ブラウザ内で安全にマスキングします。\",\n    \"外部へのデータ送信は行っておりませんので、ローカルにダウンロードすればインターネット接続がなくても動作します。\",\n  ],\n  demoUrl: \"https://igs-service.github.io/textmasker/\",\n  demoLabel: \"デモサイト（ブラウザで試す）\",\n  repoUrl: \"https://github.com/igs-service/textmasker\",\n  repoLabel: \"GitHubから取得\",\n  zipUrl: \"https://github.com/igs-service/textmasker/releases/latest/download/TextMasker-latest.zip\",\n  zipLabel: \"ZIPでダウンロード\",\n  footerText: \"IGS LLC.\",\n  footerLinkUrl: \"https://github.com/igs-service\",\n  footerLinkLabel: \"TextMasker\",\n};\n","/**\n * Brand Module - ブランド適用ロジック\n */\n\nimport { brandConfig } from \"@brand-config\";\n\n/**\n * 現在のブランド設定を取得\n * @returns {Object} ブランド設定\n */\nexport function getBrandConfig() {\n  return brandConfig || {};\n}\n\n/**\n * ファイル名のベース名を取得（ダウンロード時に使用）\n * @returns {string} プロダクト名\n */\nexport function getAppFilenameBase() {\n  const config = getBrandConfig();\n  return config.productName || \"TexMask\";\n}\n\n/**\n * DOM要素にテキストを設定\n * @param {string} id - 要素ID\n * @param {string} value - 設定する値\n */\nfunction setText(id, value) {\n  if (!value) {\n    return;\n  }\n  const el = document.getElementById(id);\n  if (el) {\n    el.textContent = value;\n  }\n}\n\n/**\n * リンク要素を設定\n * @param {string} id - 要素ID\n * @param {string} url - リンクURL\n * @param {string} label - リンクラベル\n */\nfunction setLink(id, url, label) {\n  const el = document.getElementById(id);\n  if (!el) {\n    return;\n  }\n  if (!url) {\n    el.hidden = true;\n    return;\n  }\n  el.href = url;\n  if (label) {\n    el.textContent = label;\n  }\n  el.hidden = false;\n}\n\n/**\n * ブランド設定をDOMに適用\n */\nexport function applyBrandConfig() {\n  const config = getBrandConfig();\n\n  // ページタイトル\n  document.title = config.pageTitle || config.productName || document.title;\n\n  // ヘッダー\n  setText(\"brandTitle\", config.logoText || config.productName);\n  setText(\"brandEyebrow\", config.eyebrow);\n\n  // リード文\n  const lede = document.getElementById(\"brandLede\");\n  if (lede && Array.isArray(config.ledeLines)) {\n    lede.textContent = config.ledeLines.join(\"\\n\");\n  }\n\n  // リンク\n  setLink(\"demoLink\", config.demoUrl, config.demoLabel || \"デモサイト\");\n  setLink(\"repoLink\", config.repoUrl, config.repoLabel || \"GitHubから取得\");\n  setLink(\"zipLink\", config.zipUrl, config.zipLabel || \"ZIPでダウンロード\");\n\n  // フッター\n  const footerEl = document.getElementById(\"footerText\");\n  if (footerEl) {\n    const baseText = (footerEl.textContent || \"\").trim();\n    const extraText = (config.footerText || \"\").trim();\n    const linkLabel = (config.footerLinkLabel || \"\").trim();\n    if (extraText && extraText !== linkLabel) {\n      const lowerExtra = extraText.toLowerCase();\n      const replaceBase =\n        lowerExtra.startsWith(\"copyright\") || extraText.includes(\"©\");\n      footerEl.textContent = replaceBase || !baseText\n        ? extraText\n        : `${baseText} ${extraText}`;\n    }\n  }\n  setLink(\"footerLink\", config.footerLinkUrl, config.footerLinkLabel);\n}\n","/**\n * Constants Module - 定数定義\n */\n\n// Storage Keys\nexport const STORAGE_KEY = \"masking-web-state-v1\";\nexport const PRESET_KEY = \"masking-web-presets-v1\";\nexport const ADDRESS_DICT_CUSTOM_KEY = \"masking-web-address-dict-custom-v1\";\nexport const HMAC_KEY_STORAGE = \"masking-web-hmac-key-v1\";\nexport const ADDRESS_PREF_SELECTION_KEY = \"masking-web-address-pref-selection-v1\";\nexport const TEXT_DICT_KEY = \"masking-web-text-dict-v1\";\n\n// URLs\nexport const ADDRESS_DICT_LOCAL_URL = \"data/address-dict.json\";\nexport const ADDRESS_TOWN_DICT_URL = \"data/address-town-dict.json\";\nexport const GEOLONIA_API_URL = \"https://geolonia.github.io/japanese-addresses/api/ja.json\";\n\n// Timing\nexport const MASK_DELAY_MS = 180;\nexport const ASYNC_MASK_THRESHOLD = 20000;\nexport const COPY_FEEDBACK_DURATION_MS = 1200;\n\n// Configuration\nexport const SESSION_ID_LENGTH = 4;\nexport const ADDRESS_PATTERN_CHUNK_SIZE = 2000;\nexport const ADDRESS_SEARCH_LIMIT = 50;\nexport const DICT_IMPORT_BACKUP_PREFIX = \"転記前バックアップ\";\nexport const TEXT_DICT_MAX_LABELS = 10;\nexport const TEXT_DICT_MAX_ROWS_PER_LABEL = 100000;\n\n// Address Prefectures\nexport const ADDRESS_PREFECTURES = [\n  \"北海道\",\n  \"青森県\",\n  \"岩手県\",\n  \"宮城県\",\n  \"秋田県\",\n  \"山形県\",\n  \"福島県\",\n  \"茨城県\",\n  \"栃木県\",\n  \"群馬県\",\n  \"埼玉県\",\n  \"千葉県\",\n  \"東京都\",\n  \"神奈川県\",\n  \"新潟県\",\n  \"富山県\",\n  \"石川県\",\n  \"福井県\",\n  \"山梨県\",\n  \"長野県\",\n  \"岐阜県\",\n  \"静岡県\",\n  \"愛知県\",\n  \"三重県\",\n  \"滋賀県\",\n  \"京都府\",\n  \"大阪府\",\n  \"兵庫県\",\n  \"奈良県\",\n  \"和歌山県\",\n  \"鳥取県\",\n  \"島根県\",\n  \"岡山県\",\n  \"広島県\",\n  \"山口県\",\n  \"徳島県\",\n  \"香川県\",\n  \"愛媛県\",\n  \"高知県\",\n  \"福岡県\",\n  \"佐賀県\",\n  \"長崎県\",\n  \"熊本県\",\n  \"大分県\",\n  \"宮崎県\",\n  \"鹿児島県\",\n  \"沖縄県\",\n];\n\nexport const ADDRESS_PREFECTURES_SORTED = [...ADDRESS_PREFECTURES].sort(\n  (left, right) => right.length - left.length\n);\n","/**\n * State Module - 状態管理\n */\n\nimport { ui } from \"./ui.js\";\nimport { STORAGE_KEY } from \"./constants.js\";\n\n// グローバル変数 (export let で他モジュールから参照・更新可能)\nexport let addressPatterns = null; // 住所パターンのキャッシュ\nexport let addressPatternChunks = [];\nexport let addressCityPatterns = null;\nexport let addressCityPatternsByPref = new Map();\nexport let addressTownPatternsByPref = null;\nexport let addressTownPrefectures = null;\nexport let addressDictLoadPromise = null;\nexport let addressTownDictLoadPromise = null;\nexport let addressSelectedPrefs = null;\nexport let currentSessionId = null; // 現在のセッションID\nexport let currentMaskDictionary = null; // 現在のマスク辞書\nexport let currentUnmaskDictionary = null; // 復号用辞書\nexport let maskRunId = 0;\nexport let textDictionaries = []; // テキスト辞書\n\n// 状態オブジェクト (初期値は空配列、baseRules は rules.js で設定される)\nexport const state = {\n  rules: [],\n};\n\n/**\n * 現在の状態をペイロード形式で取得\n * @param {Function} readDictRows - 辞書行を読み取る関数 (dictionary.js から渡される)\n * @returns {Object} 状態ペイロード\n */\nexport function buildStatePayload(readDictRows) {\n  return {\n    inputText: ui.inputText.value,\n    sampleSelect: ui.sampleSelect.value,\n    useRandomSessionId: ui.useRandomSessionId?.checked ?? true,\n    dictDefaultPrefix: ui.dictDefaultPrefix.value,\n    dictRows: readDictRows ? readDictRows() : [],\n    rules: state.rules.map((rule) => ({\n      name: rule.name,\n      enabled: rule.enabled,\n    })),\n    rulesOrder: state.rules.map((rule) => rule.name),\n  };\n}\n\n/**\n * ペイロードから状態を復元\n * 注意: この関数は UI フォーム値と state.rules を更新するが、\n * renderDictRows() や renderRules() は呼び出さない(循環依存回避)。\n * 呼び出し側で必要に応じてレンダリング関数を呼ぶこと。\n * @param {Object} payload - 状態ペイロード\n * @param {Array} baseRules - ベースルール配列 (rules.js から渡される)\n * @returns {Object} 復元結果 { dictRowsData, needsRulesRender }\n */\nexport function applyStatePayload(payload, baseRules) {\n  if (!payload || typeof payload !== \"object\") {\n    return { dictRowsData: null, needsRulesRender: false };\n  }\n\n  let dictRowsData = null;\n  let needsRulesRender = false;\n\n  if (typeof payload.inputText === \"string\") {\n    ui.inputText.value = payload.inputText;\n  }\n  if (typeof payload.sampleSelect === \"string\") {\n    ui.sampleSelect.value = payload.sampleSelect;\n  }\n  if (typeof payload.useRandomSessionId === \"boolean\" && ui.useRandomSessionId) {\n    ui.useRandomSessionId.checked = payload.useRandomSessionId;\n  }\n  if (typeof payload.dictDefaultPrefix === \"string\") {\n    ui.dictDefaultPrefix.value = payload.dictDefaultPrefix;\n  }\n  if (Array.isArray(payload.dictRows)) {\n    dictRowsData = payload.dictRows; // 呼び出し側で renderDictRows() を呼ぶ\n  }\n  if (Array.isArray(payload.rules) && baseRules) {\n    const enabledMap = new Map(\n      payload.rules.map((rule) => [rule.name, rule.enabled])\n    );\n    state.rules = baseRules.map((rule) => ({\n      ...rule,\n      enabled: enabledMap.has(rule.name) ? enabledMap.get(rule.name) : true,\n    }));\n    needsRulesRender = true;\n  }\n  if (Array.isArray(payload.rulesOrder)) {\n    const orderMap = new Map(\n      payload.rulesOrder.map((name, idx) => [name, idx])\n    );\n    state.rules.sort((a, b) => {\n      const aPos = orderMap.has(a.name)\n        ? orderMap.get(a.name)\n        : Number.MAX_SAFE_INTEGER;\n      const bPos = orderMap.has(b.name)\n        ? orderMap.get(b.name)\n        : Number.MAX_SAFE_INTEGER;\n      return aPos - bPos;\n    });\n  }\n\n  return { dictRowsData, needsRulesRender };\n}\n\n/**\n * プリセット用ペイロード作成 (入力テキストを除外)\n * @param {Function} readDictRows - 辞書行を読み取る関数\n * @returns {Object} プリセットペイロード\n */\nexport function buildPresetPayload(readDictRows) {\n  const payload = buildStatePayload(readDictRows);\n  payload.inputText = \"\";\n  payload.sampleSelect = \"\";\n  return payload;\n}\n\n/**\n * 状態を localStorage に保存\n * @param {Function} readDictRows - 辞書行を読み取る関数\n */\nexport function persistState(readDictRows) {\n  try {\n    const payload = buildStatePayload(readDictRows);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));\n  } catch (err) {\n    // Ignore storage failures (private mode, disabled storage).\n    console.warn(\"Failed to persist state to localStorage:\", err);\n  }\n}\n\n/**\n * localStorage から状態を復元\n * 注意: この関数は applyStatePayload() を呼び出すが、レンダリングは行わない。\n * @param {Array} baseRules - ベースルール配列\n * @returns {Object} 復元結果 { dictRowsData, needsRulesRender }\n */\nexport function restoreState(baseRules) {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) {\n      return { dictRowsData: null, needsRulesRender: false };\n    }\n    const payload = JSON.parse(raw);\n    return applyStatePayload(payload, baseRules);\n  } catch (err) {\n    // Ignore parse/storage failures.\n    console.warn(\"Failed to restore state from localStorage:\", err);\n    return { dictRowsData: null, needsRulesRender: false };\n  }\n}\n\n// グローバル変数の更新用ヘルパー (他モジュールから import * as state を使って更新)\nexport function setAddressPatterns(value) {\n  addressPatterns = value;\n}\n\nexport function setAddressPatternChunks(value) {\n  addressPatternChunks = value;\n}\n\nexport function setAddressCityPatterns(value) {\n  addressCityPatterns = value;\n}\n\nexport function setAddressCityPatternsByPref(value) {\n  addressCityPatternsByPref = value;\n}\n\nexport function setAddressTownPatternsByPref(value) {\n  addressTownPatternsByPref = value;\n}\n\nexport function setAddressTownPrefectures(value) {\n  addressTownPrefectures = value;\n}\n\nexport function setAddressDictLoadPromise(value) {\n  addressDictLoadPromise = value;\n}\n\nexport function setAddressTownDictLoadPromise(value) {\n  addressTownDictLoadPromise = value;\n}\n\nexport function setAddressSelectedPrefs(value) {\n  addressSelectedPrefs = value;\n}\n\nexport function setCurrentSessionId(value) {\n  currentSessionId = value;\n}\n\nexport function setCurrentMaskDictionary(value) {\n  currentMaskDictionary = value;\n}\n\nexport function setCurrentUnmaskDictionary(value) {\n  currentUnmaskDictionary = value;\n}\n\nexport function incrementMaskRunId() {\n  maskRunId++;\n  return maskRunId;\n}\n\nexport function setTextDictionaries(value) {\n  textDictionaries = value;\n}\n","/**\n * IO Module - ファイル入出力とクリップボード操作\n */\n\nimport { ui, updateStatusDisplay } from \"./ui.js\";\nimport { state, persistState, applyStatePayload, buildPresetPayload } from \"./state.js\";\nimport { COPY_FEEDBACK_DURATION_MS } from \"./constants.js\";\nimport { getAppFilenameBase } from \"./brand.js\";\n\n/**\n * ファイル名をサニタイズ\n * @param {string} name - 元のファイル名\n * @returns {string} サニタイズされたファイル名\n */\nexport function sanitizeFileName(name) {\n  return name.replace(/[\\\\/:*?\"<>|]/g, \"_\").trim() || \"config\";\n}\n\n/**\n * ファイル名用タイムスタンプをフォーマット\n * @param {Date} date - 日付オブジェクト\n * @returns {string} YYYYmmdd-HHMM 形式のタイムスタンプ\n */\nexport function formatTimestampForFilename(date) {\n  const pad = (value) => String(value).padStart(2, \"0\");\n  return `${date.getFullYear()}${pad(date.getMonth() + 1)}${pad(\n    date.getDate()\n  )}-${pad(date.getHours())}${pad(date.getMinutes())}`;\n}\n\n/**\n * マスク後のテキストをファイルに保存\n */\nexport function saveMaskedOutput() {\n  const value = ui.outputText.value;\n  if (!value) {\n    updateStatusDisplay(\"保存するテキストがありません。\", true);\n    return;\n  }\n  const timestamp = formatTimestampForFilename(new Date());\n  const baseName = getAppFilenameBase();\n  const blob = new Blob([value], { type: \"text/plain\" });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = `${baseName}_${timestamp}_masked.txt`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n  updateStatusDisplay(\"マスク後テキストを保存しました。\");\n}\n\n/**\n * マスク前のテキストをファイルに保存\n */\nexport function savePlainOutput() {\n  const value = ui.inputText.value;\n  if (!value) {\n    updateStatusDisplay(\"保存するテキストがありません。\", true);\n    return;\n  }\n  const timestamp = formatTimestampForFilename(new Date());\n  const baseName = getAppFilenameBase();\n  const blob = new Blob([value], { type: \"text/plain\" });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = `${baseName}_${timestamp}_plain.txt`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n  updateStatusDisplay(\"テキストを保存しました。\");\n}\n\n/**\n * プレーンテキストファイルを読み込み\n * @param {File} file - ファイルオブジェクト\n * @param {Function} readDictRows - 辞書行読み取り関数\n */\nexport function loadPlainTextFile(file, readDictRows) {\n  if (!file) {\n    return;\n  }\n  const reader = new FileReader();\n  reader.onload = () => {\n    const content = typeof reader.result === \"string\" ? reader.result : \"\";\n    ui.inputText.value = content;\n    persistState(readDictRows);\n  };\n  reader.onerror = () => {\n    updateStatusDisplay(\"ファイルの読み込みに失敗しました。\", true);\n  };\n  reader.readAsText(file, \"utf-8\");\n}\n\n/**\n * インポートされたペイロードをパース\n * @param {Object} raw - インポートされたデータ\n * @returns {Object|null} { name, payload } または null\n */\nexport function parseImportedPayload(raw) {\n  if (!raw || typeof raw !== \"object\") {\n    return null;\n  }\n  if (raw.payload && typeof raw.payload === \"object\") {\n    return { name: raw.name || \"\", payload: raw.payload };\n  }\n  return { name: raw.name || \"\", payload: raw };\n}\n\n/**\n * プリセットをJSONファイルにエクスポート\n * @param {Function} resolveExportName - エクスポート名を解決する関数\n * @param {Function} readDictRows - 辞書行読み取り関数\n */\nexport function exportPresetToFile(resolveExportName, readDictRows) {\n  const name = resolveExportName();\n  if (!name) {\n    updateStatusDisplay(\"設定名を入力してください。\", true);\n    return;\n  }\n\n  const payload = buildPresetPayload(readDictRows);\n  const exportPayload = {\n    name,\n    exportedAt: new Date().toISOString(),\n    payload,\n  };\n  const blob = new Blob([JSON.stringify(exportPayload, null, 2)], {\n    type: \"application/json\",\n  });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = `${sanitizeFileName(name)}.json`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n  updateStatusDisplay(`設定「${name}」をJSONに保存しました。`);\n}\n\n/**\n * JSONファイルからプリセットをインポート\n * @param {File} file - ファイルオブジェクト\n * @param {Array} baseRules - ベースルール配列\n * @param {Function} renderRules - ルール描画関数\n * @param {Function} renderDictRows - 辞書行描画関数\n * @param {Function} readDictRows - 辞書行読み取り関数\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function importPresetFromFile(\n  file,\n  baseRules,\n  renderRules,\n  renderDictRows,\n  readDictRows,\n  scheduleMask\n) {\n  if (!file) {\n    return;\n  }\n  const reader = new FileReader();\n  reader.onload = () => {\n    try {\n      const data = JSON.parse(reader.result);\n      const parsed = parseImportedPayload(data);\n      if (!parsed || !parsed.payload) {\n        throw new Error(\"invalid payload\");\n      }\n\n      const result = applyStatePayload(parsed.payload, baseRules);\n\n      // 辞書行を復元\n      if (result.dictRowsData && renderDictRows) {\n        renderDictRows(result.dictRowsData, scheduleMask);\n      }\n\n      // ルールを再描画\n      if (result.needsRulesRender && renderRules) {\n        renderRules(readDictRows, scheduleMask);\n      }\n\n      persistState(readDictRows);\n      if (scheduleMask) scheduleMask();\n\n      if (parsed.name) {\n        ui.presetName.value = parsed.name;\n      } else {\n        ui.presetName.value = \"\";\n      }\n      updateStatusDisplay(\"JSON設定を読み込みました。\");\n    } catch (err) {\n      updateStatusDisplay(\"JSONの読み込みに失敗しました。\", true);\n    } finally {\n      ui.presetImportFile.value = \"\";\n    }\n  };\n  reader.onerror = () => {\n    updateStatusDisplay(\"JSONの読み込みに失敗しました。\", true);\n    ui.presetImportFile.value = \"\";\n  };\n  reader.readAsText(file, \"utf-8\");\n}\n\n/**\n * 出力テキストをクリップボードにコピー\n */\nexport async function copyOutput() {\n  const value = ui.outputText.value;\n  if (!value) {\n    return;\n  }\n  try {\n    await navigator.clipboard.writeText(value);\n    ui.copyBtn.textContent = \"コピー済み\";\n    setTimeout(() => {\n      ui.copyBtn.textContent = \"コピー\";\n    }, COPY_FEEDBACK_DURATION_MS);\n  } catch (err) {\n    console.warn(\"Failed to copy to clipboard:\", err);\n    ui.copyBtn.textContent = \"失敗\";\n    setTimeout(() => {\n      ui.copyBtn.textContent = \"コピー\";\n    }, COPY_FEEDBACK_DURATION_MS);\n  }\n}\n","\"use strict\";\n\n/**\n * Masking Engine - マスキングエンジンのコア機能\n */\n\nexport function normalizeRegexPattern(pattern) {\n  let flags = \"g\";\n  let value = pattern;\n  let consumed = true;\n  while (consumed) {\n    consumed = false;\n    const match = value.match(/^\\(\\?([a-zA-Z]+)\\)/);\n    if (match) {\n      consumed = true;\n      value = value.slice(match[0].length);\n      const raw = match[1];\n      if (raw.includes(\"i\")) flags += \"i\";\n      if (raw.includes(\"m\")) flags += \"m\";\n      if (raw.includes(\"s\")) flags += \"s\";\n      if (raw.includes(\"u\")) flags += \"u\";\n      if (raw.includes(\"y\")) flags += \"y\";\n    }\n  }\n  return { value, flags };\n}\n\nexport function escapeRegExp(value) {\n  return value.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n\nexport function buildRuleRegex(rule) {\n  const normalized = normalizeRegexPattern(rule.pattern);\n  return new RegExp(normalized.value, normalized.flags);\n}\n\nfunction formatCount(value, width) {\n  const raw = String(value);\n  if (!width || width <= raw.length) {\n    return raw;\n  }\n  return raw.padStart(width, \"0\");\n}\n\nexport class PlaceholderMap {\n  constructor(sessionId, includeSessionId) {\n    this.dictionaryId = sessionId;\n    this.includeSessionId = Boolean(includeSessionId);\n    this.sessionId = this.includeSessionId ? this.dictionaryId : \"\";\n    this.maps = {};\n    this.counts = {};\n  }\n  get(key, raw, prefix, width) {\n    if (!this.maps[key]) {\n      this.maps[key] = {};\n      this.counts[key] = 0;\n    }\n    const bucket = this.maps[key];\n    if (bucket[raw]) {\n      return bucket[raw];\n    }\n    this.counts[key] += 1;\n    const suffix = `${prefix}:${formatCount(this.counts[key], width)}`;\n    const value = this.includeSessionId\n      ? `{{${this.sessionId}:${suffix}}}`\n      : `{{${suffix}}}`;\n    bucket[raw] = value;\n    return value;\n  }\n  getDictionary() {\n    const mappings = {};\n    for (const key in this.maps) {\n      const bucket = this.maps[key];\n      for (const original in bucket) {\n        const masked = bucket[original];\n        mappings[masked] = original;\n      }\n    }\n    return {\n      version: \"1.0\",\n      session_id: this.includeSessionId ? this.sessionId : \"\",\n      created_at: new Date().toISOString(),\n      mappings: mappings\n    };\n  }\n}\n\nfunction buildDictionarySignaturePayload(dictionary) {\n  if (!dictionary || typeof dictionary !== \"object\") {\n    return null;\n  }\n  const mappings = dictionary.mappings && typeof dictionary.mappings === \"object\"\n    ? dictionary.mappings\n    : {};\n  const sortedKeys = Object.keys(mappings).sort();\n  const sortedMappings = {};\n  for (const key of sortedKeys) {\n    sortedMappings[key] = mappings[key];\n  }\n  const payload = {\n    version: dictionary.version || \"1.0\",\n    session_id: dictionary.session_id || \"\",\n    created_at: dictionary.created_at || \"\",\n    mappings: sortedMappings\n  };\n  return JSON.stringify(payload);\n}\n\nexport async function computeDictionarySignature(dictionary) {\n  const payload = buildDictionarySignaturePayload(dictionary);\n  if (!payload) {\n    return null;\n  }\n  if (\n    !window.crypto ||\n    !window.crypto.subtle ||\n    typeof window.TextEncoder === \"undefined\"\n  ) {\n    return null;\n  }\n  const bytes = new TextEncoder().encode(payload);\n  const hash = await window.crypto.subtle.digest(\"SHA-256\", bytes);\n  const hex = Array.from(new Uint8Array(hash))\n    .map((value) => value.toString(16).padStart(2, \"0\"))\n    .join(\"\");\n  return `sha256:${hex}`;\n}\n","/**\n * Unmask Module - マスク解除機能\n */\n\nimport { ui, updateStatusDisplay } from \"./ui.js\";\nimport * as stateVars from \"./state.js\";\nimport { setCurrentUnmaskDictionary } from \"./state.js\";\nimport { getAppFilenameBase } from \"./brand.js\";\nimport { formatTimestampForFilename } from \"./io.js\";\nimport { escapeRegExp, computeDictionarySignature } from \"../../masking-engine.js\";\n\n/**\n * 辞書をJSONファイルとしてダウンロード\n */\nasync function downloadDictionary() {\n  if (!stateVars.currentMaskDictionary) {\n    updateStatusDisplay(\"マスク実行後に辞書をダウンロードできます。\", true);\n    return;\n  }\n\n  try {\n    // 署名が未生成の場合は生成\n    if (!stateVars.currentMaskDictionary.signature) {\n      const signature = await computeDictionarySignature(\n        stateVars.currentMaskDictionary\n      );\n      if (signature) {\n        stateVars.currentMaskDictionary.signature = signature;\n        updateUnmaskDictStatus(stateVars.currentMaskDictionary);\n      }\n    }\n\n    const blob = new Blob(\n      [JSON.stringify(stateVars.currentMaskDictionary, null, 2)],\n      { type: \"application/json\" }\n    );\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    const baseName = getAppFilenameBase();\n    link.download = `${baseName}_${formatTimestampForFilename(new Date())}_unmask.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n\n    updateStatusDisplay(\"辞書をダウンロードしました。\");\n  } catch (err) {\n    updateStatusDisplay(\"辞書のダウンロードに失敗しました。\", true);\n    console.error(\"Dictionary download failed:\", err);\n  }\n}\n\n/**\n * マスク解除元のテキストエリアを取得\n * @returns {HTMLTextAreaElement}\n */\nfunction getUnmaskSource() {\n  return ui.outputText;\n}\n\n/**\n * マスク解除先のテキストエリアを取得\n * @returns {HTMLTextAreaElement}\n */\nfunction getUnmaskTarget() {\n  return ui.inputText;\n}\n\n/**\n * マスク解除処理\n * @param {Object} dictionary - マスク解除辞書\n */\nfunction unmaskText(dictionary) {\n  const source = getUnmaskSource();\n  const target = getUnmaskTarget();\n  if (!source || !target) {\n    return;\n  }\n  const input = source.value || \"\";\n  if (!input.trim()) {\n    target.value = \"\";\n    updateUnmaskStatusDisplay(\"入力テキストが空です。\");\n    return;\n  }\n\n  if (!dictionary || !dictionary.mappings) {\n    target.value = \"\";\n    updateUnmaskStatusDisplay(\"辞書が読み込まれていません。\", true);\n    updateUnmaskDictStatus(null);\n    return;\n  }\n\n  let output = input;\n  const stats = [];\n\n  // マスク解除処理\n  for (const [mask, original] of Object.entries(dictionary.mappings)) {\n    const escapedMask = escapeRegExp(mask);\n    const regex = new RegExp(escapedMask, \"g\");\n    const matches = output.match(regex);\n    if (matches) {\n      stats.push({ mask, original, count: matches.length });\n      output = output.replace(regex, original);\n    }\n  }\n\n  const totalCount = stats.reduce((sum, s) => sum + s.count, 0);\n\n  target.value = output;\n  updateUnmaskStatusDisplay(`マスク解除件数: ${totalCount}`);\n  updateUnmaskDictStatus(dictionary);\n}\n\n/**\n * マスク解除ステータス表示を更新\n * @param {string} message - メッセージ\n * @param {boolean} isError - エラーかどうか\n */\nfunction updateUnmaskStatusDisplay(message, isError = false) {\n  if (ui.unmaskStats) {\n    ui.unmaskStats.textContent = message;\n    ui.unmaskStats.classList.toggle(\"error\", isError);\n  }\n}\n\n/**\n * マスク解除辞書のステータス表示を更新\n * @param {Object} dict - 辞書オブジェクト\n */\nfunction updateUnmaskDictStatus(dict) {\n  if (!ui.unmaskDictStatus) {\n    return;\n  }\n  if (!dict) {\n    ui.unmaskDictStatus.textContent = \"ID: (なし)\";\n    return;\n  }\n  if (typeof dict.session_id === \"string\" && dict.session_id) {\n    ui.unmaskDictStatus.textContent = `ID: ${dict.session_id}`;\n    return;\n  }\n  const signature = dict.signature;\n  if (typeof signature === \"string\" && signature.length > 0) {\n    const normalized = signature.replace(/^sha256:/, \"\");\n    ui.unmaskDictStatus.textContent = `ID: ${normalized.slice(0, 8)}`;\n    return;\n  }\n  ui.unmaskDictStatus.textContent = \"ID: (なし)\";\n}\n\n/**\n * マスク済みテキストファイルを読み込み\n * @param {File} file - ファイル\n */\nfunction loadUnmaskTextFile(file) {\n  if (!file) {\n    return;\n  }\n  const reader = new FileReader();\n  reader.onload = () => {\n    const content = typeof reader.result === \"string\" ? reader.result : \"\";\n    const source = getUnmaskSource();\n    if (source) {\n      source.value = content;\n    }\n    if (stateVars.currentUnmaskDictionary) {\n      unmaskText(stateVars.currentUnmaskDictionary);\n    }\n  };\n  reader.onerror = () => {\n    updateUnmaskStatusDisplay(\"テキストファイルの読み込みに失敗しました。\", true);\n  };\n  reader.readAsText(file, \"utf-8\");\n}\n\n/**\n * 辞書ファイルを読み込み\n * @param {File} file - ファイル\n */\nasync function loadDictionaryFile(file) {\n  if (!file) {\n    return;\n  }\n\n  const reader = new FileReader();\n  reader.onload = async () => {\n    try {\n      const data = JSON.parse(reader.result);\n\n      // 辞書の基本的な検証\n      if (!data.mappings || typeof data.mappings !== \"object\") {\n        throw new Error(\"辞書フォーマットが不正です\");\n      }\n\n      // 署名の検証\n      if (data.signature) {\n        const computed = await computeDictionarySignature(data);\n        if (!computed || computed !== data.signature) {\n          throw new Error(\"辞書の署名が一致しません\");\n        }\n      }\n\n      // 辞書を保存して復号実行\n      setCurrentUnmaskDictionary(data);\n      unmaskText(data);\n      updateUnmaskDictStatus(data);\n\n      updateUnmaskStatusDisplay(\"辞書を読み込みました。\");\n    } catch (err) {\n      updateUnmaskStatusDisplay(\"辞書の読み込みに失敗しました。\", true);\n      console.error(\"Dictionary load failed:\", err);\n      if (ui.unmaskDictFile) {\n        ui.unmaskDictFile.value = \"\";\n      }\n    }\n  };\n\n  reader.onerror = () => {\n    updateUnmaskStatusDisplay(\"辞書の読み込みに失敗しました。\", true);\n    if (ui.unmaskDictFile) {\n      ui.unmaskDictFile.value = \"\";\n    }\n  };\n\n  reader.readAsText(file, \"utf-8\");\n}\n\n/**\n * ドロップゾーンを設定\n * @param {HTMLElement} zone - ドロップゾーン要素\n * @param {HTMLInputElement} input - ファイル入力要素\n * @param {Function} handler - ファイル処理関数\n */\nfunction setupDropZone(zone, input, handler) {\n  if (!zone || !input) {\n    return;\n  }\n  const onDragOver = (event) => {\n    event.preventDefault();\n    zone.classList.add(\"is-dragover\");\n  };\n  const onDragLeave = () => {\n    zone.classList.remove(\"is-dragover\");\n  };\n  const onDrop = (event) => {\n    event.preventDefault();\n    zone.classList.remove(\"is-dragover\");\n    const file = event.dataTransfer?.files?.[0];\n    if (file) {\n      handler(file);\n    }\n  };\n  zone.addEventListener(\"dragover\", onDragOver);\n  zone.addEventListener(\"dragleave\", onDragLeave);\n  zone.addEventListener(\"drop\", onDrop);\n  zone.addEventListener(\"click\", () => input.click());\n  zone.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      input.click();\n    }\n  });\n}\n\n/**\n * マスク解除機能の初期化\n */\nexport function initUnmaskFeatures() {\n  // 辞書ダウンロード\n  if (ui.downloadDictBtn) {\n    ui.downloadDictBtn.addEventListener(\"click\", downloadDictionary);\n  }\n\n  // マスク済みテキストのアップロード\n  if (ui.maskedTextUploadBtn && ui.unmaskTextFile) {\n    ui.maskedTextUploadBtn.addEventListener(\"click\", () => {\n      ui.unmaskTextFile.click();\n    });\n  }\n\n  // 辞書のアップロード\n  if (ui.unmaskDictUploadBtn && ui.unmaskDictFile) {\n    ui.unmaskDictUploadBtn.addEventListener(\"click\", () => {\n      ui.unmaskDictFile.click();\n    });\n  }\n\n  // ファイル選択イベント\n  if (ui.unmaskTextFile) {\n    ui.unmaskTextFile.addEventListener(\"change\", () => {\n      loadUnmaskTextFile(ui.unmaskTextFile.files?.[0]);\n      ui.unmaskTextFile.value = \"\";\n    });\n  }\n\n  if (ui.unmaskDictFile) {\n    ui.unmaskDictFile.addEventListener(\"change\", () => {\n      loadDictionaryFile(ui.unmaskDictFile.files?.[0]);\n      ui.unmaskDictFile.value = \"\";\n    });\n  }\n\n  // ドロップゾーンの設定\n  setupDropZone(ui.unmaskTextDrop, ui.unmaskTextFile, loadUnmaskTextFile);\n  setupDropZone(ui.unmaskDictDrop, ui.unmaskDictFile, loadDictionaryFile);\n\n  // 初期状態の表示\n  updateUnmaskDictStatus(stateVars.currentUnmaskDictionary);\n}\n\n/**\n * マスク解除機能をエクスポート（main.jsから呼び出すため）\n */\nexport { unmaskText, updateUnmaskDictStatus };\n","/**\n * Samples Module - サンプルデータと例\n */\n\n// ルールごとの例文\nexport const RULE_EXAMPLES = {\n  ipv4_subnet_pair: \"192.168.0.1 255.255.255.0\",\n  aws_account_id: \"123456789012\",\n  azure_subscription_id: \"1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d\",\n  jwt_token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxx.yyy\",\n  cidr_ipv4: \"10.0.0.0/24 / 192.168.1.0/25\",\n  cidr_ipv6: \"2001:db8::/32 / 2001:db8:1::/48 / 2001:0db8:85a3::/64\",\n  ipv6_address: \"2001:db8::1 / fe80::1 / 2001:0db8:85a3:0000:0000:8a2e:0370:7334\",\n  ip_address: \"192.168.0.10 / 10.0.5.12\",\n  email: \"user@example.com / ops+alert@example.co.jp\",\n  fqdn: \"app.internal.example.com / db-01.prod.example.co.jp\",\n  contract_number: \"AB-1234 / XYZ-98765\",\n  phone_jp: \"03-1234-5678 / 03 1234 5678 / (03)1234-5678 / 0120-123-456 / 090-1234-5678\",\n  phone_intl: \"+1 212 555 1234 / +44 20 7946 0958 / +81 3 1234 5678 / +49-30-1234-5678\",\n  api_key: \"XyZ123abcDEF456ghiJKL789mnoPQR012 / abcDEF1234567890GHIJklmnopQRSTuv\",\n  gcp_project_id: \"sample-prod-001 / personal-ops-2024\",\n  postal_code_jp: \"100-0001 / 123-4567\",\n};\n\n// サンプルデータ集\nexport const SAMPLE_DATA = {\n  address: [\n    \"顧客: さくら情報システム\",\n    \"担当: 佐藤 太郎 <taro.sato@example.com>\",\n    \"所在地: 〒100-0001 東京都千代田区千代田1-1\",\n    \"電話: 03-1234-5678\",\n    \"サーバー: web-01.internal.example.com (192.168.0.10)\",\n    \"\",\n    \"顧客: みずほデータサービス\",\n    \"担当: 鈴木 花子 <hanako.suzuki@example.com>\",\n    \"所在地: 〒150-0002 東京都渋谷区渋谷2-2\",\n    \"電話: 03-5678-9012\",\n    \"サーバー: app-02.internal.example.com (10.0.5.12)\",\n    \"\",\n    \"顧客: こだまソリューションズ\",\n    \"担当: 高橋 健 <ken.takahashi@example.com>\",\n    \"所在地: 〒530-0001 大阪府大阪市北区梅田1-1\",\n    \"電話: 06-1234-5678\",\n    \"サーバー: db-01.internal.example.com (172.16.10.20)\",\n    \"\",\n    \"顧客: しらさぎネットワーク\",\n    \"担当: 伊藤 愛 <ai.ito@example.com>\",\n    \"所在地: 〒060-0001 北海道札幌市中央区北1条西1丁目\",\n    \"電話: 011-234-5678\",\n    \"サーバー: cache-03.internal.example.com (192.168.1.25)\",\n    \"\",\n    \"顧客: つばさ工業\",\n    \"担当: 渡辺 翔 <sho.watanabe@example.com>\",\n    \"所在地: 〒460-0002 愛知県名古屋市中区丸の内2-2\",\n    \"電話: 052-123-4567\",\n    \"サーバー: api-01.internal.example.com (10.1.2.3)\",\n    \"\",\n    \"顧客: ひかり情報サービス\",\n    \"担当: 中村 彩 <aya.nakamura@example.com>\",\n    \"所在地: 〒730-0001 広島県広島市中区基町1-1\",\n    \"電話: 082-987-6543\",\n    \"サーバー: app-10.internal.example.com (192.168.10.10)\",\n    \"\",\n    \"顧客: さつきリサーチ\",\n    \"担当: 小林 優 <yu.kobayashi@example.com>\",\n    \"所在地: 〒980-0001 宮城県仙台市青葉区中央1-1\",\n    \"電話: 022-555-0101\",\n    \"サーバー: web-08.internal.example.com (10.2.3.4)\",\n    \"\",\n    \"顧客: みなみ物流\",\n    \"担当: 加藤 海 <kai.kato@example.com>\",\n    \"所在地: 〒900-0001 沖縄県那覇市久茂地1-1\",\n    \"電話: 098-123-4567\",\n    \"サーバー: log-05.internal.example.com (172.20.0.5)\",\n    \"\",\n    \"顧客: やまと通信\",\n    \"担当: 吉田 凛 <rin.yoshida@example.com>\",\n    \"所在地: 〒810-0001 福岡県福岡市中央区天神1-1\",\n    \"電話: 092-111-2222\",\n    \"サーバー: proxy-02.internal.example.com (192.168.5.5)\",\n    \"\",\n    \"顧客: もみじテクノ\",\n    \"担当: 山本 悠 <haruka.yamamoto@example.com>\",\n    \"所在地: 〒220-0001 神奈川県横浜市西区みなとみらい1-1\",\n    \"電話: 045-333-4444\",\n    \"サーバー: gateway-01.internal.example.com (10.10.10.10)\",\n  ].join(\"\\n\"),\n  config: [\n    \"primary_host=app.internal.example.com\",\n    \"primary_ip=10.0.5.12\",\n    \"backup_cidr=10.0.0.0/24\",\n    \"support_email=helpdesk@example.com\",\n    \"contract=AB-1234\",\n    \"office_phone=03-9999-0000\",\n    \"ipv6_host=2001:db8::1\",\n    \"\",\n    \"auth_host=auth.internal.example.com\",\n    \"auth_ip=172.16.0.15\",\n    \"api_cidr=192.168.10.0/24\",\n    \"incident_mail=ops@example.com\",\n    \"contract=ZX-7788\",\n    \"office_phone=06-2222-3333\",\n    \"ipv6_host=2001:db8:abcd::5\",\n    \"\",\n    \"log_host=log.internal.example.com\",\n    \"log_ip=10.2.3.4\",\n    \"backup_cidr=172.20.0.0/16\",\n    \"support_email=desk@example.com\",\n    \"contract=CD-5678\",\n    \"office_phone=052-111-2222\",\n    \"ipv6_host=2001:db8:1::7\",\n    \"\",\n    \"vpn_host=vpn.internal.example.com\",\n    \"vpn_ip=203.0.113.14\",\n    \"backup_cidr=192.0.2.0/24\",\n    \"support_email=netops@example.com\",\n    \"contract=EF-9012\",\n    \"office_phone=045-123-9876\",\n    \"ipv6_host=2001:db8:2::9\",\n    \"\",\n    \"db_host=db.internal.example.com\",\n    \"db_ip=192.168.1.25\",\n    \"backup_cidr=10.1.0.0/16\",\n    \"support_email=db-support@example.com\",\n    \"contract=GH-3456\",\n    \"office_phone=092-555-0101\",\n    \"ipv6_host=2001:db8:3::11\",\n    \"\",\n    \"cache_host=cache.internal.example.com\",\n    \"cache_ip=10.10.10.10\",\n    \"backup_cidr=172.18.0.0/16\",\n    \"support_email=cache@example.com\",\n    \"contract=JK-7890\",\n    \"office_phone=011-777-8888\",\n    \"ipv6_host=2001:db8:4::13\",\n    \"\",\n    \"proxy_host=proxy.internal.example.com\",\n    \"proxy_ip=192.168.5.5\",\n    \"backup_cidr=10.3.0.0/16\",\n    \"support_email=proxy@example.com\",\n    \"contract=LM-2468\",\n    \"office_phone=098-333-4444\",\n    \"ipv6_host=2001:db8:5::15\",\n    \"\",\n    \"report_host=report.internal.example.com\",\n    \"report_ip=172.16.10.20\",\n    \"backup_cidr=192.168.20.0/24\",\n    \"support_email=report@example.com\",\n    \"contract=NP-1357\",\n    \"office_phone=022-111-2222\",\n    \"ipv6_host=2001:db8:6::17\",\n    \"\",\n    \"batch_host=batch.internal.example.com\",\n    \"batch_ip=10.4.5.6\",\n    \"backup_cidr=10.5.0.0/16\",\n    \"support_email=batch@example.com\",\n    \"contract=QR-9753\",\n    \"office_phone=082-555-6677\",\n    \"ipv6_host=2001:db8:7::19\",\n    \"\",\n    \"edge_host=edge.internal.example.com\",\n    \"edge_ip=203.0.113.120\",\n    \"backup_cidr=198.51.100.0/24\",\n    \"support_email=edge@example.com\",\n    \"contract=ST-8642\",\n    \"office_phone=03-5555-6666\",\n    \"ipv6_host=2001:db8:8::21\",\n  ].join(\"\\n\"),\n  support: [\n    \"件名: VPN接続不具合\",\n    \"申請者: 山田 花子 <hanako.yamada@example.com>\",\n    \"会社: ひまわりソフト\",\n    \"対象IP: 203.0.113.14\",\n    \"連絡先: 080-1111-2222\",\n    \"FQDN: vpn.support.example.com\",\n    \"発生時刻: 2024-06-18 09:15\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 斎藤 修 <osamu.saito@example.com>\",\n    \"会社: きらりテクノ\",\n    \"対象IP: 198.51.100.45\",\n    \"連絡先: 090-3333-4444\",\n    \"FQDN: vpn.kirari.example.com\",\n    \"発生時刻: 2024-06-18 10:42\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 井上 直 <nao.inoue@example.com>\",\n    \"会社: みなと通信\",\n    \"対象IP: 192.0.2.23\",\n    \"連絡先: 070-5555-6666\",\n    \"FQDN: vpn.minato.example.com\",\n    \"発生時刻: 2024-06-18 11:05\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 森 結衣 <yui.mori@example.com>\",\n    \"会社: さくら情報システム\",\n    \"対象IP: 203.0.113.88\",\n    \"連絡先: 080-7777-8888\",\n    \"FQDN: vpn.sakura.example.com\",\n    \"発生時刻: 2024-06-18 11:47\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 山口 慧 <kei.yamaguchi@example.com>\",\n    \"会社: こだまソリューションズ\",\n    \"対象IP: 198.51.100.99\",\n    \"連絡先: 090-9999-0000\",\n    \"FQDN: vpn.kodama.example.com\",\n    \"発生時刻: 2024-06-18 12:30\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 木村 光 <hikaru.kimura@example.com>\",\n    \"会社: みずほデータサービス\",\n    \"対象IP: 192.0.2.77\",\n    \"連絡先: 070-1111-2222\",\n    \"FQDN: vpn.mizuho.example.com\",\n    \"発生時刻: 2024-06-18 13:05\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 池田 玲 <rei.ikeda@example.com>\",\n    \"会社: さつきリサーチ\",\n    \"対象IP: 203.0.113.150\",\n    \"連絡先: 080-2222-3333\",\n    \"FQDN: vpn.satsuki.example.com\",\n    \"発生時刻: 2024-06-18 13:42\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 石井 新 <arata.ishii@example.com>\",\n    \"会社: しらさぎネットワーク\",\n    \"対象IP: 198.51.100.10\",\n    \"連絡先: 090-4444-5555\",\n    \"FQDN: vpn.shirasagi.example.com\",\n    \"発生時刻: 2024-06-18 14:25\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 小川 渚 <nagisa.ogawa@example.com>\",\n    \"会社: つばさ工業\",\n    \"対象IP: 192.0.2.100\",\n    \"連絡先: 080-6666-7777\",\n    \"FQDN: vpn.tsubasa.example.com\",\n    \"発生時刻: 2024-06-18 15:10\",\n    \"\",\n    \"件名: VPN接続不具合\",\n    \"申請者: 高田 陸 <riku.takada@example.com>\",\n    \"会社: ひかり情報サービス\",\n    \"対象IP: 203.0.113.200\",\n    \"連絡先: 090-8888-9999\",\n    \"FQDN: vpn.hikari.example.com\",\n    \"発生時刻: 2024-06-18 16:00\",\n  ].join(\"\\n\"),\n};\n","/**\n * Rules Module - ルール管理\n */\n\nimport { ui } from \"./ui.js\";\nimport { state, persistState, setCurrentSessionId } from \"./state.js\";\nimport { RULE_EXAMPLES } from \"./samples.js\";\nimport { SESSION_ID_LENGTH } from \"./constants.js\";\n\n// ベースルール定義\nexport const baseRules = [\n  {\n    name: \"ipv4_subnet_pair\",\n    label: \"IPv4 + Subnet\",\n    pattern:\n      \"\\\\b(?:\\\\d{1,3}\\\\.){3}\\\\d{1,3}\\\\s+(?:255|254|252|248|240|224|192|128|0)\\\\.(?:255|254|252|248|240|224|192|128|0)\\\\.(?:255|254|252|248|240|224|192|128|0)\\\\.(?:255|254|252|248|240|224|192|128|0)\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"SUBNET\",\n  },\n  {\n    name: \"cidr_ipv4\",\n    label: \"CIDR v4\",\n    pattern: \"\\\\b(?:\\\\d{1,3}\\\\.){3}\\\\d{1,3}/\\\\d{1,2}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"CIDR\",\n  },\n  {\n    name: \"cidr_ipv6\",\n    label: \"CIDR v6\",\n    pattern:\n      \"(?i)(?<![A-F0-9:])(?:(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}|(?:[A-F0-9]{1,4}:){1,7}:|(?:[A-F0-9]{1,4}:){1,6}:[A-F0-9]{1,4}|(?:[A-F0-9]{1,4}:){1,5}(?::[A-F0-9]{1,4}){1,2}|(?:[A-F0-9]{1,4}:){1,4}(?::[A-F0-9]{1,4}){1,3}|(?:[A-F0-9]{1,4}:){1,3}(?::[A-F0-9]{1,4}){1,4}|(?:[A-F0-9]{1,4}:){1,2}(?::[A-F0-9]{1,4}){1,5}|[A-F0-9]{1,4}:(?:(?::[A-F0-9]{1,4}){1,6})|:(?:(?::[A-F0-9]{1,4}){1,7}|:))/\\\\d{1,3}(?![A-F0-9:])\",\n    mode: \"pseudonymize\",\n    prefix: \"CIDR6\",\n  },\n  {\n    name: \"ipv6_address\",\n    label: \"IPv6\",\n    pattern:\n      \"(?i)(?<![A-F0-9:])(?:(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}|(?:[A-F0-9]{1,4}:){1,7}:|(?:[A-F0-9]{1,4}:){1,6}:[A-F0-9]{1,4}|(?:[A-F0-9]{1,4}:){1,5}(?::[A-F0-9]{1,4}){1,2}|(?:[A-F0-9]{1,4}:){1,4}(?::[A-F0-9]{1,4}){1,3}|(?:[A-F0-9]{1,4}:){1,3}(?::[A-F0-9]{1,4}){1,4}|(?:[A-F0-9]{1,4}:){1,2}(?::[A-F0-9]{1,4}){1,5}|[A-F0-9]{1,4}:(?:(?::[A-F0-9]{1,4}){1,6})|:(?:(?::[A-F0-9]{1,4}){1,7}|:))(?![A-F0-9:])\",\n    mode: \"pseudonymize\",\n    prefix: \"IPV6\",\n  },\n  {\n    name: \"ip_address\",\n    label: \"IPv4\",\n    pattern: \"\\\\b(?:\\\\d{1,3}\\\\.){3}\\\\d{1,3}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"IPv4\",\n  },\n  {\n    name: \"email\",\n    label: \"Email\",\n    pattern: \"(?i)[A-Z0-9._%+-]+@[A-Z0-9.-]+\\\\.[A-Z]{2,}\",\n    mode: \"pseudonymize\",\n    prefix: \"EMAIL\",\n  },\n  {\n    name: \"fqdn\",\n    label: \"FQDN\",\n    pattern: \"(?i)\\\\b(?:[A-Z0-9-]+\\\\.)+[A-Z]{2,}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"FQDN\",\n  },\n  {\n    name: \"contract_number\",\n    label: \"Contract No.\",\n    pattern: \"\\\\b[A-Z]{2,4}-\\\\d{4,}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"CONTRACT\",\n  },\n  {\n    name: \"phone_jp\",\n    label: \"電話番号・日本\",\n    pattern:\n      \"(?<![\\\\d:])(?:\\\\(0\\\\d{1,4}\\\\)[\\\\s-]?\\\\d{2,4}[\\\\s-]?\\\\d{4}|0\\\\d{1,4}\\\\(\\\\d{2,4}\\\\)\\\\d{4}|0\\\\d{1,4}[\\\\s-]?\\\\d{2,4}[\\\\s-]?\\\\d{4}|(?:0120|0800|0570)[\\\\s-]?\\\\d{3}[\\\\s-]?\\\\d{3})(?![\\\\d:])\",\n    mode: \"pseudonymize\",\n    prefix: \"PHONEJP\",\n  },\n  {\n    name: \"phone_intl\",\n    label: \"電話番号・国番号形式\",\n    pattern: \"(?<![\\\\d:])\\\\+\\\\d{1,3}(?:[\\\\s-]?\\\\(0\\\\))?(?:[\\\\s-]?\\\\d){9,14}(?![\\\\d:])\",\n    mode: \"pseudonymize\",\n    prefix: \"PHONEINTL\",\n  },\n  {\n    name: \"azure_subscription_id\",\n    label: \"Azure Subscription ID\",\n    pattern: \"\\\\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"AZURE\",\n  },\n  {\n    name: \"jwt_token\",\n    label: \"JWT\",\n    pattern: \"eyJ[A-Za-z0-9_-]+\\\\.[A-Za-z0-9_-]+\\\\.[A-Za-z0-9_-]+\",\n    mode: \"pseudonymize\",\n    prefix: \"JWT\",\n  },\n  {\n    name: \"api_key\",\n    label: \"API Key\",\n    pattern: \"\\\\b[A-Za-z0-9_-]{32,}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"API\",\n  },\n  {\n    name: \"gcp_project_id\",\n    label: \"GCP Project ID\",\n    pattern: \"\\\\b[a-z][a-z0-9-]{4,28}[a-z0-9]\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"GCP\",\n  },\n  {\n    name: \"postal_code_jp\",\n    label: \"郵便番号\",\n    pattern: \"\\\\b\\\\d{3}-?\\\\d{4}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"ZIP\",\n  },\n  {\n    name: \"aws_account_id\",\n    label: \"AWS Account ID\",\n    pattern: \"\\\\b\\\\d{12}\\\\b\",\n    mode: \"pseudonymize\",\n    prefix: \"AWS\",\n  },\n];\n\n/**\n * ルールのリストをUIに描画\n * @param {Function} readDictRows - 辞書行読み取り関数\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function renderRules(readDictRows, scheduleMask) {\n  ui.ruleList.innerHTML = \"\";\n  const fragment = document.createDocumentFragment();\n  state.rules.forEach((rule, index) => {\n    const wrapper = document.createElement(\"label\");\n    wrapper.className = \"rule-item\";\n    wrapper.draggable = true;\n    wrapper.dataset.index = String(index);\n    const handle = document.createElement(\"span\");\n    handle.className = \"rule-handle\";\n    handle.textContent = \"⋮⋮\";\n    const checkbox = document.createElement(\"input\");\n    checkbox.type = \"checkbox\";\n    checkbox.checked = rule.enabled;\n    checkbox.addEventListener(\"change\", () => {\n      state.rules[index].enabled = checkbox.checked;\n      persistState(readDictRows);\n      if (scheduleMask) scheduleMask();\n    });\n    const span = document.createElement(\"strong\");\n    span.className = \"rule-label\";\n    span.textContent = rule.label;\n    const example = document.createElement(\"span\");\n    example.className = \"rule-example\";\n    const exampleText = RULE_EXAMPLES[rule.name] || \"\";\n    if (exampleText) {\n      example.textContent = ` (ex. ${exampleText})`;\n    }\n    wrapper.appendChild(handle);\n    wrapper.appendChild(checkbox);\n    wrapper.appendChild(span);\n    if (exampleText) {\n      wrapper.appendChild(example);\n    }\n    fragment.appendChild(wrapper);\n  });\n  ui.ruleList.appendChild(fragment);\n\n  initRuleDrag(readDictRows, scheduleMask);\n}\n\n/**\n * ルールのドラッグ&ドロップを初期化\n * @param {Function} readDictRows - 辞書行読み取り関数\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function initRuleDrag(readDictRows, scheduleMask) {\n  const items = Array.from(ui.ruleList.querySelectorAll(\".rule-item\"));\n  if (items.length === 0) {\n    return;\n  }\n  let dragIndex = null;\n  let placeholder = null;\n  let lastDropIndex = null;\n  let lastInsertBefore = true;\n\n  const ensurePlaceholder = () => {\n    if (placeholder) {\n      return placeholder;\n    }\n    placeholder = document.createElement(\"div\");\n    placeholder.className = \"rule-placeholder\";\n    return placeholder;\n  };\n\n  const removePlaceholder = () => {\n    if (placeholder && placeholder.parentNode) {\n      placeholder.parentNode.removeChild(placeholder);\n    }\n    placeholder = null;\n  };\n\n  const clearIndicators = () => {\n    items.forEach((node) => {\n      node.classList.remove(\"drop-target\", \"drop-before\", \"drop-after\");\n    });\n  };\n  items.forEach((item) => {\n    item.addEventListener(\"dragstart\", (event) => {\n      dragIndex = Number(item.dataset.index);\n      item.classList.add(\"dragging\");\n      event.dataTransfer.effectAllowed = \"move\";\n    });\n    item.addEventListener(\"dragend\", () => {\n      item.classList.remove(\"dragging\");\n      item.classList.remove(\"drop-target\", \"drop-before\", \"drop-after\");\n      removePlaceholder();\n      dragIndex = null;\n      lastDropIndex = null;\n    });\n    item.addEventListener(\"dragover\", (event) => {\n      event.preventDefault();\n      event.dataTransfer.dropEffect = \"move\";\n      clearIndicators();\n      const rect = item.getBoundingClientRect();\n      const isBefore = event.clientY < rect.top + rect.height / 2;\n      item.classList.add(\"drop-target\");\n      item.classList.add(isBefore ? \"drop-before\" : \"drop-after\");\n      const dropIndex = Number(item.dataset.index);\n      const insertTarget = ensurePlaceholder();\n      if (isBefore) {\n        item.parentNode.insertBefore(insertTarget, item);\n      } else {\n        item.parentNode.insertBefore(insertTarget, item.nextSibling);\n      }\n      lastDropIndex = dropIndex;\n      lastInsertBefore = isBefore;\n    });\n    item.addEventListener(\"dragleave\", () => {\n      item.classList.remove(\"drop-target\", \"drop-before\", \"drop-after\");\n    });\n    item.addEventListener(\"drop\", (event) => {\n      event.preventDefault();\n      item.classList.remove(\"drop-target\", \"drop-before\", \"drop-after\");\n      const dropIndex = Number(item.dataset.index);\n      if (Number.isNaN(dragIndex) || Number.isNaN(dropIndex) || dragIndex === dropIndex) {\n        removePlaceholder();\n        return;\n      }\n      const isBefore = lastDropIndex === dropIndex ? lastInsertBefore : true;\n      const [moved] = state.rules.splice(dragIndex, 1);\n      let insertIndex = dropIndex;\n      if (dragIndex < dropIndex) {\n        insertIndex = isBefore ? dropIndex - 1 : dropIndex;\n      } else {\n        insertIndex = isBefore ? dropIndex : dropIndex + 1;\n      }\n      state.rules.splice(insertIndex, 0, moved);\n      removePlaceholder();\n      persistState(readDictRows);\n      renderRules(readDictRows, scheduleMask);\n      if (scheduleMask) scheduleMask();\n    });\n  });\n\n  ui.ruleList.addEventListener(\"dragover\", (event) => {\n    event.preventDefault();\n  });\n\n  ui.ruleList.addEventListener(\"drop\", (event) => {\n    event.preventDefault();\n    if (Number.isNaN(dragIndex) || dragIndex === null) {\n      removePlaceholder();\n      return;\n    }\n    if (lastDropIndex === null || Number.isNaN(lastDropIndex)) {\n      removePlaceholder();\n      return;\n    }\n    const [moved] = state.rules.splice(dragIndex, 1);\n    let insertIndex = lastDropIndex;\n    if (dragIndex < lastDropIndex) {\n      insertIndex = lastInsertBefore ? lastDropIndex - 1 : lastDropIndex;\n    } else {\n      insertIndex = lastInsertBefore ? lastDropIndex : lastDropIndex + 1;\n    }\n    state.rules.splice(insertIndex, 0, moved);\n    removePlaceholder();\n    persistState(readDictRows);\n    renderRules(readDictRows, scheduleMask);\n    if (scheduleMask) scheduleMask();\n  });\n}\n\n/**\n * 全ルールの有効/無効を切り替え\n * @param {Function} readDictRows - 辞書行読み取り関数\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function toggleAllRules(readDictRows, scheduleMask) {\n  const shouldEnable = state.rules.some((rule) => !rule.enabled);\n  state.rules = state.rules.map((rule) => ({ ...rule, enabled: shouldEnable }));\n  renderRules(readDictRows, scheduleMask);\n  persistState(readDictRows);\n  if (scheduleMask) scheduleMask();\n}\n\n/**\n * ルールの順序を推奨順にリセット\n * @param {Function} readDictRows - 辞書行読み取り関数\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function resetRuleOrder(readDictRows, scheduleMask) {\n  state.rules = baseRules.map((rule) => {\n    const existing = state.rules.find((item) => item.name === rule.name);\n    return {\n      ...rule,\n      enabled: existing ? existing.enabled : true,\n    };\n  });\n  persistState(readDictRows);\n  renderRules(readDictRows, scheduleMask);\n  if (scheduleMask) scheduleMask();\n}\n\n/**\n * セッションIDを生成\n * @returns {string} ランダムなセッションID\n */\nexport function generateSessionId() {\n  const chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n  let result = \"\";\n  for (let i = 0; i < SESSION_ID_LENGTH; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n}\n\n/**\n * 連番桁数を取得（テキスト辞書導入により、将来的に自動計算に移行予定）\n * @returns {number} 連番の桁数（デフォルト3桁）\n */\n/**\n * セッションIDを再生成してマスク実行\n * @param {Function} maskText - マスク実行関数\n */\nexport function regenerateSessionId(maskText) {\n  const newId = generateSessionId();\n  setCurrentSessionId(newId);\n  if (maskText) maskText();\n}\n\n/**\n * セッションID再生成ボタンの有効/無効を更新\n */\nexport function updateSessionIdControls() {\n  if (!ui.regenSessionId || !ui.useRandomSessionId) {\n    return;\n  }\n  ui.regenSessionId.disabled = !ui.useRandomSessionId.checked;\n}\n","/**\n * Dictionary Module - 任意辞書管理\n */\n\nimport { ui, updateDictTableStatusDisplay, updateStatusDisplay } from \"./ui.js\";\nimport { state, persistState } from \"./state.js\";\nimport { DICT_IMPORT_BACKUP_PREFIX } from \"./constants.js\";\nimport { normalizeRegexPattern, escapeRegExp } from \"../../masking-engine.js\";\n\n/**\n * 辞書行を読み取る\n * @returns {Array<Object>} 辞書エントリの配列\n */\nexport function readDictRows() {\n  if (!ui.dictRows) {\n    return [];\n  }\n  return Array.from(ui.dictRows.querySelectorAll(\".dict-row\")).map((row) => ({\n    enabled: row.querySelector(\".dict-enabled\")?.checked ?? true,\n    prefix: row.querySelector(\".dict-prefix\")?.value?.trim() || \"\",\n    pattern: row.querySelector(\".dict-pattern\")?.value?.trim() || \"\",\n    regex: row.querySelector(\".dict-regex\")?.checked ?? false,\n  }));\n}\n\n/**\n * 辞書のデフォルトプレフィックスを取得\n * @returns {string} デフォルトプレフィックス\n */\nexport function getDictDefaultPrefix() {\n  const raw = ui.dictDefaultPrefix?.value || \"DICT\";\n  const trimmed = raw.trim();\n  return trimmed ? trimmed.toUpperCase() : \"DICT\";\n}\n\n/**\n * 正規表現パターンを検証\n * @param {string} pattern - 検証するパターン\n * @returns {Object} { valid: boolean, error?: string }\n */\nexport function validatePattern(pattern) {\n  try {\n    const normalized = normalizeRegexPattern(pattern);\n    new RegExp(normalized.value, normalized.flags);\n    return { valid: true };\n  } catch (err) {\n    return { valid: false, error: err.message };\n  }\n}\n\n/**\n * 辞書エントリからマスキングルールを構築\n * @returns {Array<Object>|null} ルール配列、エラー時はnull\n */\nexport function buildDictionaryRules() {\n  const entries = readDictRows();\n  const rules = [];\n  updateDictTableStatusDisplay(\"\");\n  const defaultPrefix = getDictDefaultPrefix();\n  let hasError = false;\n\n  entries.forEach((entry, index) => {\n    if (!entry.enabled || !entry.pattern) {\n      return;\n    }\n    if (entry.regex) {\n      const check = validatePattern(entry.pattern);\n      if (!check.valid) {\n        updateDictTableStatusDisplay(`辞書の正規表現が不正です。(行 ${index + 1})`);\n        hasError = true;\n        return;\n      }\n    }\n    const pattern = entry.regex ? entry.pattern : escapeRegExp(entry.pattern);\n    rules.push({\n      name: `dictionary_${index}`,\n      label: \"辞書\",\n      pattern,\n      isDictionary: true,\n      prefix: (entry.prefix || defaultPrefix).toUpperCase(),\n    });\n  });\n\n  if (hasError) {\n    return null;\n  }\n  return rules;\n}\n\n/**\n * 辞書行のDOM要素を作成\n * @param {Object} entry - 辞書エントリ\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n * @returns {HTMLElement} 辞書行のDOM要素\n */\nexport function createDictRow(entry = {}, scheduleMask) {\n  const row = document.createElement(\"div\");\n  row.className = \"dict-row\";\n\n  const enabled = document.createElement(\"input\");\n  enabled.type = \"checkbox\";\n  enabled.className = \"dict-enabled\";\n  enabled.checked = entry.enabled ?? true;\n\n  const prefix = document.createElement(\"input\");\n  prefix.type = \"text\";\n  prefix.className = \"dict-prefix\";\n  prefix.placeholder = \"例: NAME\";\n  prefix.value = entry.prefix || \"\";\n\n  const pattern = document.createElement(\"input\");\n  pattern.type = \"text\";\n  pattern.className = \"dict-pattern\";\n  pattern.placeholder = \"例: さくら情報システム / \\\\d{12}\";\n  pattern.value = entry.pattern || \"\";\n\n  const regexLabel = document.createElement(\"label\");\n  regexLabel.className = \"toggle\";\n  const regex = document.createElement(\"input\");\n  regex.type = \"checkbox\";\n  regex.className = \"dict-regex\";\n  regex.checked = entry.regex ?? false;\n  regexLabel.appendChild(regex);\n\n  const removeBtn = document.createElement(\"button\");\n  removeBtn.type = \"button\";\n  removeBtn.className = \"ghost small dict-remove\";\n  removeBtn.textContent = \"削除\";\n  removeBtn.addEventListener(\"click\", () => {\n    row.remove();\n    persistState(readDictRows);\n  });\n\n  const attach = (node, eventName = \"input\") => {\n    node.addEventListener(eventName, () => {\n      persistState(readDictRows);\n      if (scheduleMask) scheduleMask();\n    });\n  };\n\n  attach(enabled, \"change\");\n  attach(prefix);\n  attach(pattern);\n  attach(regex, \"change\");\n\n  row.appendChild(enabled);\n  row.appendChild(prefix);\n  row.appendChild(pattern);\n  row.appendChild(regexLabel);\n  row.appendChild(removeBtn);\n  return row;\n}\n\n/**\n * 辞書行をUIに描画\n * @param {Array<Object>} entries - 辞書エントリの配列\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function renderDictRows(entries = [], scheduleMask) {\n  if (!ui.dictRows) {\n    return;\n  }\n  ui.dictRows.innerHTML = \"\";\n  const fragment = document.createDocumentFragment();\n  const rows = entries.length\n    ? entries\n    : [{ enabled: true, prefix: \"\", pattern: \"\", regex: false }];\n  rows.forEach((entry) => {\n    fragment.appendChild(createDictRow(entry, scheduleMask));\n  });\n  ui.dictRows.appendChild(fragment);\n}\n\n/**\n * 辞書行を追加\n * @param {Object} entry - 辞書エントリ\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function addDictRow(entry = {}, scheduleMask) {\n  if (!ui.dictRows) {\n    return;\n  }\n  ui.dictRows.appendChild(createDictRow(entry, scheduleMask));\n  persistState(readDictRows);\n  if (scheduleMask) scheduleMask();\n}\n\n/**\n * 基本設定を辞書へ転記\n * @param {Function} renderRules - ルール描画関数\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n * @param {Function} savePreset - プリセット保存関数 (preset.js から渡される)\n * @param {Function} buildStatePayload - 状態ペイロード構築関数\n */\nexport function importBasicRulesToDict(\n  renderRules,\n  scheduleMask,\n  savePreset,\n  buildStatePayload\n) {\n  const ok = window.confirm(\n    \"・基本設定の各項目が、正規表現として任意辞書の末尾にコピーされます。\\n・基本設定の各項目がオフになります。\\n・転記前の設定が以下の名前でマイ設定に保存されます。\\n　　転記前バックアップ_YYYYmmdd-HHMM\\n・以上、よろしければ「OK」を押してください。\"\n  );\n  if (!ok) {\n    return;\n  }\n\n  // バックアッププリセットを保存\n  saveImportBackupPreset(savePreset, buildStatePayload);\n\n  // 基本ルールを辞書形式に変換\n  const entries = state.rules.map((rule) => ({\n    enabled: rule.enabled,\n    prefix: rule.prefix || \"\",\n    pattern: rule.pattern || \"\",\n    regex: true,\n  }));\n\n  // 現在の辞書に追加\n  const current = readDictRows();\n  renderDictRows([...current, ...entries], scheduleMask);\n\n  // 基本ルールを全てオフにする\n  state.rules = state.rules.map((rule) => ({ ...rule, enabled: false }));\n  if (renderRules) renderRules(readDictRows, scheduleMask);\n\n  persistState(readDictRows);\n  if (scheduleMask) scheduleMask();\n  updateStatusDisplay(\"基本設定を辞書へ転記しました。\");\n}\n\n/**\n * 転記前のバックアッププリセットを保存\n * @param {Function} savePreset - プリセット保存関数\n * @param {Function} buildStatePayload - 状態ペイロード構築関数\n */\nfunction saveImportBackupPreset(savePreset, buildStatePayload) {\n  const payload = buildStatePayload(readDictRows);\n  const timestamp = formatBackupTimestamp(new Date());\n  const name = `${DICT_IMPORT_BACKUP_PREFIX}_${timestamp}`;\n\n  // savePreset は preset.js から渡される関数を使う\n  // ここでは直接 localStorage を操作\n  if (savePreset) {\n    savePreset(name, payload);\n  }\n}\n\n/**\n * バックアップ用タイムスタンプをフォーマット\n * @param {Date} date - 日付オブジェクト\n * @returns {string} YYYYmmdd-HHMM 形式のタイムスタンプ\n */\nfunction formatBackupTimestamp(date) {\n  const pad = (value) => String(value).padStart(2, \"0\");\n  const year = date.getFullYear();\n  const month = pad(date.getMonth() + 1);\n  const day = pad(date.getDate());\n  const hours = pad(date.getHours());\n  const minutes = pad(date.getMinutes());\n  return `${year}${month}${day}-${hours}${minutes}`;\n}\n","/**\n * Address Module - 住所辞書管理\n */\n\nimport { ui, updateStatusDisplay } from \"./ui.js\";\nimport * as stateVars from \"./state.js\";\nimport {\n  setAddressPatterns,\n  setAddressPatternChunks,\n  setAddressCityPatterns,\n  setAddressCityPatternsByPref,\n  setAddressTownPatternsByPref,\n  setAddressTownPrefectures,\n  setAddressDictLoadPromise,\n  setAddressTownDictLoadPromise,\n  setAddressSelectedPrefs,\n} from \"./state.js\";\nimport {\n  ADDRESS_DICT_LOCAL_URL,\n  ADDRESS_TOWN_DICT_URL,\n  ADDRESS_DICT_CUSTOM_KEY,\n  ADDRESS_PREF_SELECTION_KEY,\n  ADDRESS_PATTERN_CHUNK_SIZE,\n  ADDRESS_SEARCH_LIMIT,\n  ADDRESS_PREFECTURES,\n  ADDRESS_PREFECTURES_SORTED,\n  GEOLONIA_API_URL,\n} from \"./constants.js\";\nimport { escapeRegExp } from \"../../masking-engine.js\";\n\nconst DEFAULT_FETCH_IDLE_TIMEOUT_MS = 10_000;\n\nasync function fetchJsonWithTimeout(url, timeoutMs) {\n  const controller = new AbortController();\n  const timer = setTimeout(() => controller.abort(), timeoutMs);\n  try {\n    const response = await fetch(url, { signal: controller.signal });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    return await response.json();\n  } finally {\n    clearTimeout(timer);\n  }\n}\n\nasync function fetchJsonWithIdleTimeout(url, idleTimeoutMs) {\n  if (\n    typeof ReadableStream === \"undefined\" ||\n    typeof TextDecoder === \"undefined\"\n  ) {\n    return fetchJsonWithTimeout(url, idleTimeoutMs);\n  }\n  const controller = new AbortController();\n  const response = await fetch(url, { signal: controller.signal });\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status}`);\n  }\n  if (!response.body || typeof response.body.getReader !== \"function\") {\n    return fetchJsonWithTimeout(url, idleTimeoutMs);\n  }\n  const reader = response.body.getReader();\n  const chunks = [];\n  let total = 0;\n  let idleTimer = null;\n  const resetIdleTimer = () => {\n    if (idleTimer) {\n      clearTimeout(idleTimer);\n    }\n    idleTimer = setTimeout(() => controller.abort(), idleTimeoutMs);\n  };\n  resetIdleTimer();\n  try {\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) {\n        break;\n      }\n      if (value) {\n        chunks.push(value);\n        total += value.length;\n      }\n      resetIdleTimer();\n    }\n  } finally {\n    if (idleTimer) {\n      clearTimeout(idleTimer);\n    }\n  }\n  const buffer = new Uint8Array(total);\n  let offset = 0;\n  for (const chunk of chunks) {\n    buffer.set(chunk, offset);\n    offset += chunk.length;\n  }\n  const text = new TextDecoder(\"utf-8\").decode(buffer);\n  return JSON.parse(text);\n}\n\n/**\n * 都道府県リストを取得 (町域辞書から優先、なければデフォルト)\n * @returns {Array<string>} 都道府県リスト\n */\nexport function getPrefectureList() {\n  return Array.isArray(stateVars.addressTownPrefectures) && stateVars.addressTownPrefectures.length\n    ? stateVars.addressTownPrefectures\n    : ADDRESS_PREFECTURES;\n}\n\n/**\n * localStorage から都道府県選択状態を読み込み\n * @param {Array<string>} prefectures - 都道府県リスト\n * @returns {Set<string>} 選択された都道府県のSet\n */\nexport function loadAddressPrefSelection(prefectures) {\n  try {\n    const raw = localStorage.getItem(ADDRESS_PREF_SELECTION_KEY);\n    if (!raw) {\n      return new Set(prefectures);\n    }\n    const data = JSON.parse(raw);\n    if (!Array.isArray(data) || data.length === 0) {\n      return new Set(prefectures);\n    }\n    const valid = new Set(prefectures);\n    const filtered = data.filter((pref) => valid.has(pref));\n    return filtered.length ? new Set(filtered) : new Set(prefectures);\n  } catch (err) {\n    return new Set(prefectures);\n  }\n}\n\n/**\n * 都道府県選択状態を localStorage に保存\n * @param {Array<string>} selection - 選択された都道府県の配列\n */\nexport function saveAddressPrefSelection(selection) {\n  try {\n    localStorage.setItem(ADDRESS_PREF_SELECTION_KEY, JSON.stringify(selection));\n  } catch (err) {\n    // Ignore storage failures.\n  }\n}\n\n/**\n * 都道府県選択状態を同期 (初回読み込みまたは辞書更新時)\n * @param {Array<string>} prefectures - 都道府県リスト\n */\nexport function syncAddressPrefectureSelection(prefectures) {\n  if (!stateVars.addressSelectedPrefs) {\n    setAddressSelectedPrefs(loadAddressPrefSelection(prefectures));\n  } else {\n    const valid = new Set(prefectures);\n    const filtered = Array.from(stateVars.addressSelectedPrefs).filter((pref) =>\n      valid.has(pref)\n    );\n    setAddressSelectedPrefs(\n      filtered.length ? new Set(filtered) : new Set(prefectures)\n    );\n  }\n  saveAddressPrefSelection(Array.from(stateVars.addressSelectedPrefs));\n  renderAddressPrefectureFilters();\n}\n\n/**\n * 都道府県フィルターのチェックボックスを描画\n */\nexport function renderAddressPrefectureFilters() {\n  if (!ui.addressPrefectureList) {\n    return;\n  }\n  const prefectures = getPrefectureList();\n  if (!stateVars.addressSelectedPrefs) {\n    setAddressSelectedPrefs(loadAddressPrefSelection(prefectures));\n  }\n  ui.addressPrefectureList.innerHTML = \"\";\n  const fragment = document.createDocumentFragment();\n  prefectures.forEach((prefecture) => {\n    const label = document.createElement(\"label\");\n    label.className = \"pref-option\";\n    const input = document.createElement(\"input\");\n    input.type = \"checkbox\";\n    input.value = prefecture;\n    input.checked = stateVars.addressSelectedPrefs.has(prefecture);\n    input.dataset.prefecture = prefecture;\n    const text = document.createElement(\"span\");\n    text.textContent = prefecture;\n    label.appendChild(input);\n    label.appendChild(text);\n    fragment.appendChild(label);\n  });\n  ui.addressPrefectureList.appendChild(fragment);\n}\n\n/**\n * 都道府県選択変更を処理\n * @param {string} prefecture - 都道府県名\n * @param {boolean} isSelected - 選択状態\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function handlePrefectureSelectionChange(prefecture, isSelected, scheduleMask) {\n  if (!stateVars.addressSelectedPrefs) {\n    setAddressSelectedPrefs(new Set(getPrefectureList()));\n  }\n  if (isSelected) {\n    stateVars.addressSelectedPrefs.add(prefecture);\n  } else {\n    stateVars.addressSelectedPrefs.delete(prefecture);\n  }\n  saveAddressPrefSelection(Array.from(stateVars.addressSelectedPrefs));\n  applyAddressPrefectureFilters(scheduleMask);\n}\n\n/**\n * 全都道府県を一括選択/解除\n * @param {boolean} isSelected - 選択状態\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function setAllPrefecturesSelection(isSelected, scheduleMask) {\n  const prefectures = getPrefectureList();\n  setAddressSelectedPrefs(isSelected ? new Set(prefectures) : new Set());\n  saveAddressPrefSelection(Array.from(stateVars.addressSelectedPrefs));\n  renderAddressPrefectureFilters();\n  applyAddressPrefectureFilters(scheduleMask);\n}\n\n/**\n * パターンから都道府県を抽出\n * @param {string} pattern - 住所パターン\n * @returns {string|null} 都道府県名\n */\nfunction getPrefectureFromPattern(pattern) {\n  for (const prefecture of ADDRESS_PREFECTURES_SORTED) {\n    if (pattern.startsWith(prefecture)) {\n      return prefecture;\n    }\n  }\n  return null;\n}\n\n/**\n * 市区町村パターンを都道府県別にインデックス化\n * @param {Array<string>} patterns - 住所パターン配列\n */\nexport function indexAddressCityPatterns(patterns) {\n  const map = new Map();\n  patterns.forEach((pattern) => {\n    const prefecture = getPrefectureFromPattern(pattern);\n    if (!prefecture) {\n      return;\n    }\n    if (!map.has(prefecture)) {\n      map.set(prefecture, []);\n    }\n    map.get(prefecture).push(pattern);\n  });\n  setAddressCityPatternsByPref(map);\n}\n\n/**\n * 選択された都道府県の市区町村パターンを収集\n * @param {Set<string>} selection - 選択された都道府県のSet\n * @returns {Array<string>} パターン配列\n */\nfunction collectAddressCityPatterns(selection) {\n  const patterns = [];\n  selection.forEach((prefecture) => {\n    const values = stateVars.addressCityPatternsByPref.get(prefecture);\n    if (values) {\n      patterns.push(...values);\n    }\n  });\n  return patterns;\n}\n\n/**\n * 選択された都道府県の町域パターンを収集\n * @param {Set<string>} selection - 選択された都道府県のSet\n * @returns {Array<string>} パターン配列\n */\nfunction collectAddressTownPatterns(selection) {\n  if (!stateVars.addressTownPatternsByPref) {\n    return [];\n  }\n  const patterns = [];\n  selection.forEach((prefecture) => {\n    const values = stateVars.addressTownPatternsByPref[prefecture];\n    if (values) {\n      patterns.push(...values);\n    }\n  });\n  return patterns;\n}\n\n/**\n * 住所パターンをチャンクに分割 (正規表現の長さ制限対策)\n * @param {Array<string>} patterns - 住所パターン配列\n * @returns {Array<string>} チャンク配列\n */\nfunction buildAddressPatternChunks(patterns) {\n  if (!Array.isArray(patterns) || patterns.length === 0) {\n    return [];\n  }\n  const escapedPatterns = patterns.map((addr) => escapeRegExp(addr));\n  const chunks = [];\n  for (let i = 0; i < escapedPatterns.length; i += ADDRESS_PATTERN_CHUNK_SIZE) {\n    chunks.push(\n      escapedPatterns.slice(i, i + ADDRESS_PATTERN_CHUNK_SIZE).join(\"|\")\n    );\n  }\n  return chunks;\n}\n\n/**\n * 都道府県フィルターを適用してパターンを更新\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function applyAddressPrefectureFilters(scheduleMask) {\n  const selection = stateVars.addressSelectedPrefs ?? new Set(getPrefectureList());\n  const cityPatterns = collectAddressCityPatterns(selection);\n  const townPatterns = collectAddressTownPatterns(selection);\n  setAddressPatterns([...cityPatterns, ...townPatterns]);\n  setAddressPatternChunks(buildAddressPatternChunks(stateVars.addressPatterns));\n  renderAddressSearchResults();\n  if (ui.useAddressDict?.checked && scheduleMask) {\n    scheduleMask();\n  }\n}\n\n/**\n * 住所辞書を読み込み (ローカルファイルまたはカスタム)\n */\nexport async function loadAddressDict() {\n  // localStorageのカスタム辞書を先に適用\n  const custom = loadCustomAddressDict();\n  if (custom) {\n    setAddressCityPatterns(custom.patterns);\n    indexAddressCityPatterns(stateVars.addressCityPatterns);\n    renderAddressDictStatus(custom);\n    syncAddressPrefectureSelection(getPrefectureList());\n    applyAddressPrefectureFilters();\n    return;\n  }\n\n  // 読み込み中表示\n  if (ui.addressDictVersion) {\n    ui.addressDictVersion.textContent = \"読み込み中...\";\n  }\n\n  try {\n    if (!stateVars.addressDictLoadPromise) {\n      setAddressDictLoadPromise(\n        fetch(ADDRESS_DICT_LOCAL_URL).then((response) => {\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n          }\n          return response.json();\n        })\n      );\n    }\n    const data = await stateVars.addressDictLoadPromise;\n    if (!data || !Array.isArray(data.patterns)) {\n      throw new Error(\"invalid address dict\");\n    }\n    setAddressCityPatterns(data.patterns);\n    indexAddressCityPatterns(stateVars.addressCityPatterns);\n    renderAddressDictStatus({\n      version: data.version || \"unknown\",\n      updated: data.updated || \"-\",\n      count: Number.isFinite(data.count)\n        ? data.count\n        : stateVars.addressCityPatterns.length,\n      source: \"local\",\n    });\n    syncAddressPrefectureSelection(getPrefectureList());\n    applyAddressPrefectureFilters();\n  } catch (err) {\n    console.warn(\"Failed to load address dictionary from JSON:\", err);\n    setAddressDictLoadPromise(null);\n    try {\n      const fallback = await loadLocalAddressDictFromScript();\n      setAddressCityPatterns(fallback.patterns);\n      indexAddressCityPatterns(stateVars.addressCityPatterns);\n      renderAddressDictStatus({\n        version: fallback.version || \"unknown\",\n        updated: fallback.updated || \"-\",\n        count: Number.isFinite(fallback.count)\n          ? fallback.count\n          : stateVars.addressCityPatterns.length,\n        source: \"local\",\n      });\n      syncAddressPrefectureSelection(getPrefectureList());\n      applyAddressPrefectureFilters();\n    } catch (fallbackErr) {\n      console.error(\"Failed to load address dictionary (all methods):\", fallbackErr);\n      ui.addressDictVersion.textContent = \"エラー\";\n      ui.addressDictSource.textContent = \"データが見つかりません\";\n      setAddressCityPatterns([]);\n      setAddressCityPatternsByPref(new Map());\n      applyAddressPrefectureFilters();\n    }\n  }\n}\n\n/**\n * 町域辞書を読み込み\n */\nexport async function loadTownAddressDict() {\n  if (!ui.addressTownDictStatus) {\n    return;\n  }\n  ui.addressTownDictStatus.textContent = \"読み込み中...\";\n  try {\n    if (!stateVars.addressTownDictLoadPromise) {\n      setAddressTownDictLoadPromise(\n        fetch(ADDRESS_TOWN_DICT_URL).then((response) => {\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n          }\n          return response.json();\n        })\n      );\n    }\n    const data = await stateVars.addressTownDictLoadPromise;\n    if (!data || typeof data !== \"object\") {\n      throw new Error(\"invalid town dict\");\n    }\n    setAddressTownPatternsByPref(data.patternsByPrefecture || {});\n    setAddressTownPrefectures(\n      Array.isArray(data.prefectures) ? data.prefectures : null\n    );\n    const totalCount = Number.isFinite(data.totalCount)\n      ? data.totalCount\n      : Object.values(stateVars.addressTownPatternsByPref).reduce(\n          (sum, list) => sum + (Array.isArray(list) ? list.length : 0),\n          0\n        );\n    ui.addressTownDictStatus.textContent = `読み込み済み (${totalCount.toLocaleString()}件)`;\n    syncAddressPrefectureSelection(getPrefectureList());\n    applyAddressPrefectureFilters();\n  } catch (err) {\n    console.warn(\"Failed to load town address dictionary:\", err);\n    setAddressTownDictLoadPromise(null);\n    ui.addressTownDictStatus.textContent = \"読み込み失敗\";\n  }\n}\n\n/**\n * スクリプトタグから住所辞書を読み込み (フォールバック)\n * @returns {Promise<Object>} 辞書データ\n */\nfunction loadLocalAddressDictFromScript() {\n  if (\n    typeof ADDRESS_PATTERNS !== \"undefined\" &&\n    Array.isArray(ADDRESS_PATTERNS)\n  ) {\n    return Promise.resolve({\n      version: ADDRESS_DICT_VERSION,\n      updated: ADDRESS_DICT_UPDATED,\n      count: ADDRESS_DICT_COUNT,\n      patterns: ADDRESS_PATTERNS,\n    });\n  }\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.src = \"data/address-dict.js\";\n    script.onload = () => {\n      if (\n        typeof ADDRESS_PATTERNS !== \"undefined\" &&\n        Array.isArray(ADDRESS_PATTERNS)\n      ) {\n        resolve({\n          version: ADDRESS_DICT_VERSION,\n          updated: ADDRESS_DICT_UPDATED,\n          count: ADDRESS_DICT_COUNT,\n          patterns: ADDRESS_PATTERNS,\n        });\n      } else {\n        reject(new Error(\"address dict missing\"));\n      }\n    };\n    script.onerror = () => reject(new Error(\"address dict load failed\"));\n    document.head.appendChild(script);\n  });\n}\n\n/**\n * localStorage からカスタム住所辞書を読み込み\n * @returns {Object|null} カスタム辞書データ\n */\nfunction loadCustomAddressDict() {\n  try {\n    const raw = localStorage.getItem(ADDRESS_DICT_CUSTOM_KEY);\n    if (!raw) {\n      return null;\n    }\n    const data = JSON.parse(raw);\n    if (!data || !Array.isArray(data.patterns)) {\n      return null;\n    }\n    return {\n      version: data.version || \"unknown\",\n      updated: data.updated || \"-\",\n      count: data.patterns.length,\n      source: \"custom\",\n      patterns: data.patterns,\n    };\n  } catch (err) {\n    return null;\n  }\n}\n\n/**\n * 住所辞書のステータスを描画\n * @param {Object} info - 辞書情報 { version, updated, count, source }\n */\nfunction renderAddressDictStatus(info) {\n  if (!info) return;\n\n  ui.addressDictVersion.textContent = formatAddressDictVersion(info.version);\n  ui.addressDictCount.textContent = info.count.toLocaleString();\n  ui.addressDictUpdated.textContent = info.updated;\n\n  if (info.source === \"custom\") {\n    ui.addressDictSource.textContent = \"オンライン更新\";\n  } else {\n    ui.addressDictSource.textContent = \"ローカル同梱\";\n  }\n\n  renderAddressSearchResults();\n}\n\n/**\n * 辞書バージョンをフォーマット\n * @param {string} version - バージョン文字列\n * @returns {string} フォーマット済みバージョン\n */\nfunction formatAddressDictVersion(version) {\n  // \"2025-12\" -> \"2025年12月版\"\n  if (!version || version === \"unknown\") return \"-\";\n  const match = version.match(/^(\\d{4})-(\\d{2})$/);\n  if (match) {\n    return `${match[1]}年${parseInt(match[2], 10)}月版`;\n  }\n  return version;\n}\n\n/**\n * 住所検索結果を描画\n * @param {string} query - 検索クエリ (省略時は入力欄から取得)\n */\nexport function renderAddressSearchResults(query) {\n  if (!ui.addressSearchResults) {\n    return;\n  }\n  const patterns = stateVars.addressPatterns;\n  if (!patterns) {\n    ui.addressSearchResults.textContent = \"辞書を読み込み中...\";\n    return;\n  }\n  const raw = query ?? ui.addressSearchInput?.value ?? \"\";\n  const trimmed = raw.trim();\n  if (!trimmed) {\n    ui.addressSearchResults.textContent = \"検索結果はここに表示されます。\";\n    return;\n  }\n  const results = patterns.filter((pattern) => pattern.includes(trimmed));\n  const limited = results.slice(0, ADDRESS_SEARCH_LIMIT);\n  if (limited.length === 0) {\n    ui.addressSearchResults.textContent = \"一致する住所がありません。\";\n    return;\n  }\n  const suffix = results.length > ADDRESS_SEARCH_LIMIT ? \"\\n...\" : \"\";\n  ui.addressSearchResults.textContent = limited.join(\"\\n\") + suffix;\n}\n\n/**\n * オンラインから住所辞書を更新\n */\nexport async function updateAddressDict() {\n  ui.updateAddressDict.disabled = true;\n  ui.updateAddressDict.textContent = \"更新中...\";\n\n  try {\n    const data = await fetchJsonWithIdleTimeout(\n      GEOLONIA_API_URL,\n      DEFAULT_FETCH_IDLE_TIMEOUT_MS\n    );\n    const patterns = buildAddressPatternsFromGeolonia(data);\n\n    const now = new Date();\n    const version = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(\n      2,\n      \"0\"\n    )}`;\n    const updated = now.toISOString().split(\"T\")[0];\n\n    const payload = {\n      version,\n      updated,\n      patterns,\n      source: \"geolonia\",\n    };\n\n    localStorage.setItem(ADDRESS_DICT_CUSTOM_KEY, JSON.stringify(payload));\n    setAddressCityPatterns(patterns);\n    indexAddressCityPatterns(stateVars.addressCityPatterns);\n\n    renderAddressDictStatus({\n      version,\n      updated,\n      count: patterns.length,\n      source: \"custom\",\n    });\n\n    syncAddressPrefectureSelection(getPrefectureList());\n    applyAddressPrefectureFilters();\n    updateStatusDisplay(\"住所辞書を更新しました。\");\n  } catch (err) {\n    updateStatusDisplay(\"住所辞書の更新に失敗しました。\", true);\n    console.error(\"Address dict update failed:\", err);\n  } finally {\n    ui.updateAddressDict.disabled = false;\n    ui.updateAddressDict.textContent = \"更新\";\n  }\n}\n\n/**\n * Geolonia APIのデータから住所パターンを構築\n * @param {Object} data - Geolonia APIのレスポンス\n * @returns {Array<string>} 住所パターン配列\n */\nfunction buildAddressPatternsFromGeolonia(data) {\n  const patterns = [];\n\n  for (const [prefecture, cities] of Object.entries(data)) {\n    cities.forEach((city) => {\n      patterns.push(`${prefecture}${city}`);\n    });\n  }\n\n  return patterns;\n}\n\n/**\n * 住所辞書をローカル同梱版にリセット\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function resetAddressDict(scheduleMask) {\n  const ok = window.confirm(\n    \"住所辞書をローカル同梱版に戻しますか？\\nオンラインで更新した辞書データは削除されます。\"\n  );\n  if (!ok) {\n    return;\n  }\n\n  try {\n    localStorage.removeItem(ADDRESS_DICT_CUSTOM_KEY);\n    loadAddressDict();\n    updateStatusDisplay(\"住所辞書を初期版に戻しました。\");\n    if (scheduleMask) scheduleMask();\n  } catch (err) {\n    updateStatusDisplay(\"住所辞書のリセットに失敗しました。\", true);\n  }\n}\n\n/**\n * 住所辞書からマスキングルールを構築\n * @returns {Array<Object>} ルール配列\n */\nexport function buildAddressRules() {\n  if (!ui.useAddressDict.checked) {\n    return [];\n  }\n\n  const rules = [];\n\n  // 都道府県+市区町村+町域のパターン\n  if (stateVars.addressPatternChunks.length) {\n    stateVars.addressPatternChunks.forEach((prefectureCity) => {\n      rules.push({\n        name: \"address_prefecture_city\",\n        label: \"住所・地域\",\n        pattern: prefectureCity,\n        mode: \"pseudonymize\",\n        prefix: \"ADDRESS\",\n      });\n    });\n  }\n\n  return rules;\n}\n","/**\n * Preset Module - マイ設定の保存・読み込み・管理\n */\n\nimport { ui, updatePresetStatusDisplay } from \"./ui.js\";\nimport { state, persistState, applyStatePayload, buildPresetPayload } from \"./state.js\";\nimport { PRESET_KEY } from \"./constants.js\";\n\n/**\n * プリセット一覧を読み込み\n * @returns {Array<Object>} プリセット配列\n */\nexport function loadPresets() {\n  try {\n    const raw = localStorage.getItem(PRESET_KEY);\n    if (!raw) {\n      return [];\n    }\n    const data = JSON.parse(raw);\n    return Array.isArray(data) ? data : [];\n  } catch (err) {\n    console.warn(\"Failed to load presets from localStorage:\", err);\n    return [];\n  }\n}\n\n/**\n * プリセット一覧を保存\n * @param {Array<Object>} list - プリセット配列\n */\nexport function savePresets(list) {\n  try {\n    localStorage.setItem(PRESET_KEY, JSON.stringify(list));\n  } catch (err) {\n    // Ignore storage failures.\n    console.warn(\"Failed to save presets to localStorage:\", err);\n  }\n}\n\n/**\n * プリセット選択ドロップダウンを描画\n */\nexport function renderPresetOptions() {\n  const presets = loadPresets();\n  ui.presetSelect.innerHTML = \"\";\n  const empty = document.createElement(\"option\");\n  empty.value = \"\";\n  empty.textContent = \"保存した設定を選択\";\n  ui.presetSelect.appendChild(empty);\n  presets.forEach((preset) => {\n    const option = document.createElement(\"option\");\n    option.value = preset.name;\n    option.textContent = preset.name;\n    ui.presetSelect.appendChild(option);\n  });\n}\n\n/**\n * 現在の設定をプリセットとして保存\n * @param {Function} readDictRows - 辞書行読み取り関数\n */\nexport function savePreset(readDictRows) {\n  const name = ui.presetName.value.trim();\n  if (!name) {\n    updatePresetStatusDisplay(\"設定名を入力してください。\", true);\n    return;\n  }\n  const presets = loadPresets();\n  const existing = presets.find((preset) => preset.name === name);\n  if (existing) {\n    const ok = window.confirm(\"同名の設定を上書きしますか？\");\n    if (!ok) {\n      return;\n    }\n    existing.payload = buildPresetPayload(readDictRows);\n    existing.updatedAt = new Date().toISOString();\n  } else {\n    presets.push({\n      name,\n      payload: buildPresetPayload(readDictRows),\n      updatedAt: new Date().toISOString(),\n    });\n  }\n  savePresets(presets);\n  renderPresetOptions();\n  ui.presetSelect.value = name;\n  updatePresetStatusDisplay(\"\");\n}\n\n/**\n * 指定した名前のプリセットを保存 (importBasicRulesToDict 用)\n * @param {string} name - プリセット名\n * @param {Object} payload - 状態ペイロード\n */\nexport function savePresetWithPayload(name, payload) {\n  const presets = loadPresets();\n  presets.push({\n    name,\n    payload,\n    updatedAt: new Date().toISOString(),\n  });\n  savePresets(presets);\n  renderPresetOptions();\n}\n\n/**\n * 選択したプリセットを読み込み\n * @param {Array} baseRules - ベースルール配列\n * @param {Function} renderRules - ルール描画関数\n * @param {Function} renderDictRows - 辞書行描画関数\n * @param {Function} readDictRows - 辞書行読み取り関数\n * @param {Function} scheduleMask - マスク処理スケジュール関数\n */\nexport function loadPreset(\n  baseRules,\n  renderRules,\n  renderDictRows,\n  readDictRows,\n  scheduleMask\n) {\n  const name = ui.presetSelect.value;\n  if (!name) {\n    updatePresetStatusDisplay(\"保存した設定を選択してください。\", true);\n    return;\n  }\n  const presets = loadPresets();\n  const target = presets.find((preset) => preset.name === name);\n  if (!target) {\n    return;\n  }\n\n  const result = applyStatePayload(target.payload, baseRules);\n\n  // 辞書行を復元\n  if (result.dictRowsData && renderDictRows) {\n    renderDictRows(result.dictRowsData, scheduleMask);\n  }\n\n  // ルールを再描画\n  if (result.needsRulesRender && renderRules) {\n    renderRules(readDictRows, scheduleMask);\n  }\n\n  persistState(readDictRows);\n  if (scheduleMask) scheduleMask();\n  updatePresetStatusDisplay(\"\");\n}\n\n/**\n * 選択したプリセットを削除\n */\nexport function deletePreset() {\n  const name = ui.presetSelect.value;\n  if (!name) {\n    updatePresetStatusDisplay(\"削除する設定を選択してください。\", true);\n    return;\n  }\n  const ok = window.confirm(`設定「${name}」を削除しますか？`);\n  if (!ok) {\n    return;\n  }\n  const presets = loadPresets().filter((preset) => preset.name !== name);\n  savePresets(presets);\n  renderPresetOptions();\n  updatePresetStatusDisplay(\"\");\n}\n\n/**\n * エクスポート名を解決 (入力欄または選択欄から取得)\n * @returns {string|null} エクスポート名\n */\nexport function resolveExportName() {\n  const name = ui.presetName.value.trim() || ui.presetSelect.value.trim();\n  if (!name) {\n    return null;\n  }\n  return name;\n}\n","export const ADDRESS_BLOCK_PATTERN =\n  '(?:' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}丁目\\s*' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}番\\s*' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}号?' +\n  '|' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}丁目\\s*' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}(?:番|号)' +\n  '|' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}丁目' +\n  '|' +\n  '[東西南北]?[0-9０-９一二三四五六七八九十百千〇零]{1,3}条' +\n  '[東西南北]?[0-9０-９一二三四五六七八九十百千〇零]{1,3}丁目?' +\n  '|' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}' +\n  '(?:[-‐ー－]|の)' +\n  '[0-9０-９一二三四五六七八九十百千〇零]{1,3}' +\n  '(?:(?:[-‐ー－]|の)[0-9０-９一二三四五六七八九十百千〇零]{1,3})?' +\n  ')(?![0-9０-９])';\n","/**\n * Masking Module - マスキング実行エンジン\n */\n\nimport { ui, updateStatusDisplay } from \"./ui.js\";\nimport * as stateVars from \"./state.js\";\nimport { state, setCurrentSessionId, setCurrentMaskDictionary, setCurrentUnmaskDictionary, incrementMaskRunId } from \"./state.js\";\nimport { generateSessionId } from \"./rules.js\";\nimport { ASYNC_MASK_THRESHOLD, MASK_DELAY_MS } from \"./constants.js\";\nimport { ADDRESS_BLOCK_PATTERN } from \"../../patterns.js\";\nimport { buildRuleRegex, PlaceholderMap, computeDictionarySignature } from \"../../masking-engine.js\";\n\nconst DEFAULT_NUMBER_WIDTH = 3;\n\n/**\n * テキスト辞書ルールと基本ルールを優先度順にマージ\n * @param {Array} baseRules - 基本ルール配列\n * @param {Array} textDictRules - テキスト辞書ルール配列\n * @returns {Array} マージ後のルール配列\n */\nfunction mergeRulesWithPriority(baseRules, textDictRules) {\n  if (!textDictRules || textDictRules.length === 0) {\n    return baseRules;\n  }\n\n  const result = [];\n  const baseRulesCount = baseRules.length;\n\n  // 優先度でグループ化\n  const priority1 = []; // High: 基本ルールの最上位より上\n  const priority2 = []; // 基本ルールの75%位置\n  const priority3 = []; // Mid: 基本ルールの50%位置\n  const priority4 = []; // 基本ルールの25%位置\n  const priority5 = []; // Low: 基本ルールのさらに下\n\n  textDictRules.forEach(rule => {\n    if (rule.priority === 1) priority1.push(rule);\n    else if (rule.priority === 2) priority2.push(rule);\n    else if (rule.priority === 3) priority3.push(rule);\n    else if (rule.priority === 4) priority4.push(rule);\n    else if (rule.priority === 5) priority5.push(rule);\n  });\n\n  // 各優先度グループ内でorderInPriorityでソート\n  const sortByOrder = (a, b) => a.orderInPriority - b.orderInPriority;\n  priority1.sort(sortByOrder);\n  priority2.sort(sortByOrder);\n  priority3.sort(sortByOrder);\n  priority4.sort(sortByOrder);\n  priority5.sort(sortByOrder);\n\n  // マージ\n  result.push(...priority1); // 優先度1: 最上位\n\n  const pos75 = Math.floor(baseRulesCount * 0.75);\n  const pos50 = Math.floor(baseRulesCount * 0.50);\n  const pos25 = Math.floor(baseRulesCount * 0.25);\n\n  for (let i = 0; i < baseRulesCount; i++) {\n    // 優先度2: 75%位置\n    if (i === pos75 && priority2.length > 0) {\n      result.push(...priority2);\n    }\n    // 優先度3: 50%位置\n    if (i === pos50 && priority3.length > 0) {\n      result.push(...priority3);\n    }\n    // 優先度4: 25%位置\n    if (i === pos25 && priority4.length > 0) {\n      result.push(...priority4);\n    }\n\n    result.push(baseRules[i]);\n  }\n\n  result.push(...priority5); // 優先度5: 最下位\n\n  return result;\n}\n\n/**\n * 単一ルールを適用\n * @param {string} text - 対象テキスト\n * @param {Object} rule - マスキングルール\n * @param {PlaceholderMap} placeholders - プレースホルダーマップ\n * @param {Object} counts - カウント記録用オブジェクト\n * @returns {string} マスク後のテキスト\n */\nexport function applyRule(text, rule, placeholders, counts) {\n  if (!rule.pattern) {\n    return text;\n  }\n  const numberWidth = DEFAULT_NUMBER_WIDTH;\n  const regex = rule._compiledRegex || (rule._compiledRegex = buildRuleRegex(rule));\n  let hits = 0;\n  const replaced = text.replace(regex, (match) => {\n    hits += 1;\n    return placeholders.get(rule.name, match, rule.prefix, numberWidth);\n  });\n  if (hits) {\n    counts[rule.name] = (counts[rule.name] || 0) + hits;\n    if (rule.isTextDictionary) {\n      const label = rule.customLabel || `Custom_${rule.label}`;\n      counts[`text_dict_label:${label}`] =\n        (counts[`text_dict_label:${label}`] || 0) + hits;\n    }\n  }\n  return replaced;\n}\n\n/**\n * 住所ブロックルールを適用 (複数行にまたがる住所)\n * @param {string} text - 対象テキスト\n * @param {PlaceholderMap} placeholders - プレースホルダーマップ\n * @param {Object} counts - カウント記録用オブジェクト\n * @returns {string} マスク後のテキスト\n */\nexport function applyAddressBlockRules(text, placeholders, counts) {\n  if (!stateVars.addressPatternChunks.length) {\n    return text;\n  }\n  const numberWidth = DEFAULT_NUMBER_WIDTH;\n  const blockRegex = new RegExp(ADDRESS_BLOCK_PATTERN, \"g\");\n  const chunkRegexes = stateVars.addressPatternChunks.map((chunk) => new RegExp(chunk));\n  const addressPlaceholderRegex = /\\{\\{[^}]*:ADDRESS:\\d+\\}\\}/;\n  const lines = text.split(/\\r?\\n/);\n  let changed = false;\n  const updated = lines.map((line) => {\n    // \"所在地\" を含む行のみ処理\n    if (\n      !line.includes(\"所在地\") &&\n      !line.includes(\"所在地：\") &&\n      !line.includes(\"所在地:\")\n    ) {\n      return line;\n    }\n    // 住所パターンまたは既にマスクされたADDRESSプレースホルダーを含むか確認\n    const hasRegion =\n      addressPlaceholderRegex.test(line) ||\n      chunkRegexes.some((regex) => regex.test(line));\n    if (!hasRegion) {\n      return line;\n    }\n    // 住所ブロックパターンを適用\n    let hits = 0;\n    const replaced = line.replace(blockRegex, (match) => {\n      hits += 1;\n      return placeholders.get(\n        \"address_block\",\n        match,\n        \"ADDRESS_BLOCK\",\n        numberWidth\n      );\n    });\n    // 正規化: 郵便番号と住所の間の空白を削除\n    const normalized = replaced\n      .replace(/(\\{\\{[^}]*:ZIP:\\d+\\}\\})\\s+(?=\\{\\{[^}]*:ADDRESS:\\d+\\}\\})/g, \"$1\")\n      .replace(\n        /(\\{\\{[^}]*:ADDRESS:\\d+\\}\\})([^\\s\\{]{1,30})(\\{\\{[^}]*:ADDRESS_BLOCK:\\d+\\}\\})/g,\n        (match, head, middle, tail) => {\n          const masked = placeholders.get(\n            \"address_mid\",\n            middle,\n            \"ADDRESS_MID\",\n            numberWidth\n          );\n          counts.address_mid = (counts.address_mid || 0) + 1;\n          return `${head}${masked}${tail}`;\n        }\n      );\n    if (hits) {\n      counts.address_block = (counts.address_block || 0) + hits;\n      changed = true;\n    }\n    return normalized;\n  });\n  return changed ? updated.join(\"\\n\") : text;\n}\n\n/**\n * 統計情報を描画\n * @param {Object} counts - カウント記録\n */\nfunction renderStats(counts) {\n  const allEntries = [];\n\n  // 基本ルール\n  state.rules\n    .filter((rule) => counts[rule.name])\n    .forEach((rule) => {\n      allEntries.push(`${rule.label}: ${counts[rule.name]}`);\n    });\n\n  // その他のルール（辞書、住所など）\n  for (const [key, count] of Object.entries(counts)) {\n    // 基本ルールに含まれないものを追加\n    const isBaseRule = state.rules.some((rule) => rule.name === key);\n    if (!isBaseRule) {\n      if (key.startsWith(\"text_dict_\")) {\n        continue;\n      }\n      // キー名から適切なラベルを生成\n      let label = key;\n      if (key.startsWith(\"dictionary_\")) {\n        label = \"辞書\";\n      } else if (key.startsWith(\"address_\")) {\n        label = \"住所\";\n      } else if (key.startsWith(\"text_dict_label:\")) {\n        label = key.replace(\"text_dict_label:\", \"\");\n      }\n      allEntries.push(`${label}: ${count}`);\n    }\n  }\n\n  const total = Object.values(counts).reduce((sum, value) => sum + value, 0);\n  const breakdown = allEntries.length ? allEntries.join(\" / \") : \"なし\";\n\n  updateStatusDisplay(`総マスク数: ${total} （内訳: ${breakdown}）`);\n}\n\nasync function attachDictionarySignature(dict) {\n  if (!computeDictionarySignature || !dict) {\n    return;\n  }\n  const signature = await computeDictionarySignature(dict);\n  if (!signature) {\n    return;\n  }\n  dict.signature = signature;\n  setCurrentMaskDictionary(dict);\n  setCurrentUnmaskDictionary(dict);\n  if (typeof window.updateUnmaskDictStatus === \"function\") {\n    window.updateUnmaskDictStatus(dict);\n  }\n}\n\n/**\n * マスク処理 (同期版)\n * @param {string} source - 入力テキスト\n * @param {Function} buildDictionaryRules - 辞書ルール構築関数\n * @param {Function} buildAddressRules - 住所ルール構築関数\n * @param {Function} buildTextDictionaryRules - テキスト辞書ルール構築関数\n * @returns {boolean} 成功時true、エラー時false\n */\nfunction maskTextSync(source, buildDictionaryRules, buildAddressRules, buildTextDictionaryRules) {\n  // 新しいセッションIDを生成\n  if (!stateVars.currentSessionId) {\n    setCurrentSessionId(generateSessionId());\n  }\n  const includeSessionId = ui.useRandomSessionId?.checked ?? true;\n  const placeholders = new PlaceholderMap(stateVars.currentSessionId, includeSessionId);\n  const counts = {};\n  let result = source;\n  try {\n    // 任意辞書\n    const dictRules = buildDictionaryRules();\n    if (dictRules === null) {\n      return false;\n    }\n    dictRules.forEach((dictRule) => {\n      result = applyRule(result, dictRule, placeholders, counts);\n    });\n\n    // 住所辞書（基本ルールより先に適用）\n    const addressRules = buildAddressRules();\n    addressRules.forEach((addressRule) => {\n      result = applyRule(result, addressRule, placeholders, counts);\n    });\n    result = applyAddressBlockRules(result, placeholders, counts);\n\n    // テキスト辞書 + 基本ルールを統合して優先度順に適用\n    const textDictRules = buildTextDictionaryRules ? buildTextDictionaryRules() : [];\n    const mergedRules = mergeRulesWithPriority(state.rules, textDictRules);\n    mergedRules.forEach((rule) => {\n      if (!rule.enabled) {\n        return;\n      }\n      result = applyRule(result, rule, placeholders, counts);\n    });\n\n    ui.outputText.value = result;\n    renderStats(counts);\n\n    // 辞書を保存\n    const dict = placeholders.getDictionary();\n    setCurrentMaskDictionary(dict);\n    setCurrentUnmaskDictionary(dict);\n    if (typeof window.updateUnmaskDictStatus === \"function\") {\n      window.updateUnmaskDictStatus(dict);\n    }\n    attachDictionarySignature(dict);\n    return true;\n  } catch (err) {\n    updateStatusDisplay(\"正規表現の形式が不正です。\", true);\n    return false;\n  }\n}\n\n/**\n * マスク処理 (非同期版)\n * @param {string} source - 入力テキスト\n * @param {number} runId - 実行ID\n * @param {Function} buildDictionaryRules - 辞書ルール構築関数\n * @param {Function} buildAddressRules - 住所ルール構築関数\n * @param {Function} buildTextDictionaryRules - テキスト辞書ルール構築関数\n */\nasync function maskTextAsync(\n  source,\n  runId,\n  buildDictionaryRules,\n  buildAddressRules,\n  buildTextDictionaryRules\n) {\n  const shouldYield = source.length > ASYNC_MASK_THRESHOLD;\n  const yieldToBrowser = () => new Promise((resolve) => setTimeout(resolve, 0));\n  const isLatest = () => runId === stateVars.maskRunId;\n\n  // 新しいセッションIDを生成\n  if (!stateVars.currentSessionId) {\n    setCurrentSessionId(generateSessionId());\n  }\n  const includeSessionId = ui.useRandomSessionId?.checked ?? true;\n  const placeholders = new PlaceholderMap(stateVars.currentSessionId, includeSessionId);\n  const counts = {};\n  let result = source;\n  try {\n    const dictRules = buildDictionaryRules();\n    if (dictRules === null) {\n      return;\n    }\n    for (const dictRule of dictRules) {\n      result = applyRule(result, dictRule, placeholders, counts);\n      if (shouldYield) {\n        await yieldToBrowser();\n        if (!isLatest()) return;\n      }\n    }\n\n    const addressRules = buildAddressRules();\n    for (const addressRule of addressRules) {\n      result = applyRule(result, addressRule, placeholders, counts);\n      if (shouldYield) {\n        await yieldToBrowser();\n        if (!isLatest()) return;\n      }\n    }\n    result = applyAddressBlockRules(result, placeholders, counts);\n\n    // テキスト辞書 + 基本ルールを統合して優先度順に適用\n    const textDictRules = buildTextDictionaryRules ? buildTextDictionaryRules() : [];\n    const mergedRules = mergeRulesWithPriority(state.rules, textDictRules);\n    for (const rule of mergedRules) {\n      if (!rule.enabled) {\n        continue;\n      }\n      result = applyRule(result, rule, placeholders, counts);\n      if (shouldYield) {\n        await yieldToBrowser();\n        if (!isLatest()) return;\n      }\n    }\n\n    if (!isLatest()) return;\n    ui.outputText.value = result;\n    renderStats(counts);\n    const dict = placeholders.getDictionary();\n    setCurrentMaskDictionary(dict);\n    setCurrentUnmaskDictionary(dict);\n    if (typeof window.updateUnmaskDictStatus === \"function\") {\n      window.updateUnmaskDictStatus(dict);\n    }\n    attachDictionarySignature(dict);\n  } catch (err) {\n    updateStatusDisplay(\"正規表現の形式が不正です。\", true);\n  }\n}\n\n/**\n * マスク処理のエントリーポイント\n * @param {Function} buildDictionaryRules - 辞書ルール構築関数\n * @param {Function} buildAddressRules - 住所ルール構築関数\n * @param {Function} buildTextDictionaryRules - テキスト辞書ルール構築関数\n */\nexport function maskText(buildDictionaryRules, buildAddressRules, buildTextDictionaryRules) {\n  const source = ui.inputText.value || \"\";\n  const runId = incrementMaskRunId();\n  if (!source.trim()) {\n    ui.outputText.value = \"\";\n    updateStatusDisplay(\"入力テキストが空です。\");\n    setCurrentMaskDictionary(null);\n    setCurrentUnmaskDictionary(null);\n    if (typeof window.updateUnmaskDictStatus === \"function\") {\n      window.updateUnmaskDictStatus(null);\n    }\n    return;\n  }\n\n  if (source.length > ASYNC_MASK_THRESHOLD) {\n    updateStatusDisplay(\"マスク処理中...\");\n    maskTextAsync(source, runId, buildDictionaryRules, buildAddressRules, buildTextDictionaryRules);\n    return;\n  }\n\n  maskTextSync(source, buildDictionaryRules, buildAddressRules, buildTextDictionaryRules);\n}\n\n/**\n * マスク処理をスケジュール (現在は自動マスクを無効化しているため何もしない)\n */\nexport function scheduleMask() {\n  // Auto masking disabled. Use explicit mask action.\n  return;\n}\n","/**\n * Text Dictionary Module - テキスト辞書管理\n */\n\nimport { TEXT_DICT_KEY, TEXT_DICT_MAX_LABELS, TEXT_DICT_MAX_ROWS_PER_LABEL } from \"./constants.js\";\nimport { textDictionaries, setTextDictionaries } from \"./state.js\";\nimport { escapeRegExp } from \"../../masking-engine.js\";\n\n/**\n * UUID生成（簡易版）\n * @returns {string} UUID\n */\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n/**\n * TXTパース（1行1エントリ）\n * @param {string} text - テキストデータ\n * @returns {Array<string>} エントリ配列\n */\nexport function parseTXT(text) {\n  if (!text || typeof text !== 'string') {\n    return [];\n  }\n  return text\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line.length > 0);\n}\n\n/**\n * CSVパース（値,ラベル名）\n * @param {string} text - CSVテキストデータ\n * @returns {Object} { valid: boolean, data?: Map<label, entries[]>, errors?: Array }\n */\nexport function parseCSV(text) {\n  if (!text || typeof text !== 'string') {\n    return { valid: false, errors: ['空のデータです'] };\n  }\n\n  const lines = text.split('\\n').filter(line => line.trim());\n  const labelMap = new Map();\n  const errors = [];\n\n  lines.forEach((line, index) => {\n    const trimmed = line.trim();\n    if (!trimmed) return;\n\n    // カンマチェック\n    if (!trimmed.includes(',')) {\n      errors.push(`${index + 1}行目: カンマが含まれていません`);\n      return;\n    }\n\n    // 値とラベルに分割（最初のカンマで分割）\n    const firstCommaIndex = trimmed.indexOf(',');\n    const value = trimmed.substring(0, firstCommaIndex).trim();\n    const label = trimmed.substring(firstCommaIndex + 1).trim();\n\n    if (!value || !label) {\n      errors.push(`${index + 1}行目: 値またはラベルが空です`);\n      return;\n    }\n\n    // ラベルごとにグループ化\n    if (!labelMap.has(label)) {\n      labelMap.set(label, []);\n    }\n    labelMap.get(label).push(value);\n  });\n\n  if (errors.length > 0) {\n    return { valid: false, errors };\n  }\n\n  // ラベル数チェック\n  if (labelMap.size > TEXT_DICT_MAX_LABELS) {\n    return {\n      valid: false,\n      errors: [`ラベル数が上限（${TEXT_DICT_MAX_LABELS}種類）を超えています: ${labelMap.size}種類`]\n    };\n  }\n\n  // 各ラベルの行数チェック\n  for (const [label, entries] of labelMap.entries()) {\n    if (entries.length > TEXT_DICT_MAX_ROWS_PER_LABEL) {\n      errors.push(`ラベル「${label}」の行数が上限（${TEXT_DICT_MAX_ROWS_PER_LABEL.toLocaleString()}行）を超えています: ${entries.length.toLocaleString()}行`);\n    }\n  }\n\n  if (errors.length > 0) {\n    return { valid: false, errors };\n  }\n\n  return { valid: true, data: labelMap };\n}\n\n/**\n * 連番桁数を自動計算\n * @param {number} count - エントリ数\n * @returns {number} 桁数\n */\nexport function calculateNumberWidth(count) {\n  return Math.max(2, String(count).length);\n}\n\n/**\n * LocalStorageからテキスト辞書を読み込み\n * @returns {Array} テキスト辞書配列\n */\nexport function loadTextDictionaries() {\n  try {\n    const raw = localStorage.getItem(TEXT_DICT_KEY);\n    if (!raw) {\n      return [];\n    }\n    const data = JSON.parse(raw);\n    if (!data || !Array.isArray(data.textDictionaries)) {\n      return [];\n    }\n    return data.textDictionaries;\n  } catch (err) {\n    console.warn('Failed to load text dictionaries from localStorage:', err);\n    return [];\n  }\n}\n\n/**\n * LocalStorageにテキスト辞書を保存\n * @param {Array} dictionaries - テキスト辞書配列\n */\nexport function saveTextDictionaries(dictionaries) {\n  try {\n    const data = {\n      textDictionaries: dictionaries\n    };\n    localStorage.setItem(TEXT_DICT_KEY, JSON.stringify(data));\n  } catch (err) {\n    console.error('Failed to save text dictionaries to localStorage:', err);\n    throw new Error('テキスト辞書の保存に失敗しました');\n  }\n}\n\n/**\n * テキスト辞書を追加\n * @param {string} label - ラベル名\n * @param {Array<string>} entries - エントリ配列\n * @param {number} priority - 優先度（1～5）\n * @returns {Object} 作成されたテキスト辞書オブジェクト\n */\nexport function createTextDictionary(label, entries, priority = 3) {\n  const now = new Date().toISOString();\n\n  // 同一優先度内での最大orderを取得\n  const existingDicts = textDictionaries.filter(d => d.priority === priority);\n  const maxOrder = existingDicts.length > 0\n    ? Math.max(...existingDicts.map(d => d.orderInPriority))\n    : -1;\n\n  return {\n    id: generateUUID(),\n    label: label.trim(),\n    entries: entries.map(e => e.trim()).filter(e => e.length > 0),\n    enabled: true,\n    priority: priority,\n    orderInPriority: maxOrder + 1,\n    createdAt: now,\n    updatedAt: now\n  };\n}\n\n/**\n * テキスト辞書を更新\n * @param {string} id - 辞書ID\n * @param {Object} updates - 更新内容 { label?, entries?, priority?, enabled? }\n * @returns {boolean} 成功したかどうか\n */\nexport function updateTextDictionary(id, updates) {\n  const index = textDictionaries.findIndex(d => d.id === id);\n  if (index === -1) {\n    return false;\n  }\n\n  const dict = textDictionaries[index];\n  const updated = {\n    ...dict,\n    ...updates,\n    updatedAt: new Date().toISOString()\n  };\n\n  // 優先度が変更された場合、orderInPriorityを再計算\n  if (updates.priority !== undefined && updates.priority !== dict.priority) {\n    const existingDicts = textDictionaries.filter(\n      d => d.priority === updates.priority && d.id !== id\n    );\n    const maxOrder = existingDicts.length > 0\n      ? Math.max(...existingDicts.map(d => d.orderInPriority))\n      : -1;\n    updated.orderInPriority = maxOrder + 1;\n  }\n\n  textDictionaries[index] = updated;\n  saveTextDictionaries(textDictionaries);\n  return true;\n}\n\n/**\n * テキスト辞書を削除\n * @param {string} id - 辞書ID\n * @returns {boolean} 成功したかどうか\n */\nexport function deleteTextDictionary(id) {\n  const index = textDictionaries.findIndex(d => d.id === id);\n  if (index === -1) {\n    return false;\n  }\n\n  textDictionaries.splice(index, 1);\n  saveTextDictionaries(textDictionaries);\n  return true;\n}\n\n/**\n * テキスト辞書をエクスポート（TXT形式）\n * @param {string} id - 辞書ID\n * @param {string} appName - アプリ名\n * @returns {Object} { filename: string, content: string } または null\n */\nexport function exportTextDictionary(id, appName = 'TexMask') {\n  const dict = textDictionaries.find(d => d.id === id);\n  if (!dict) {\n    return null;\n  }\n\n  const now = new Date();\n  const dateStr = now.toISOString().split('T')[0].replace(/-/g, '');\n  const filename = `${appName}_CustomDIC-${dict.label}-${dateStr}.txt`;\n  const content = dict.entries.join('\\n');\n\n  return { filename, content };\n}\n\n/**\n * 同名ラベルのチェック\n * @param {string} label - ラベル名\n * @returns {Object|null} 既存の辞書オブジェクト、なければnull\n */\nexport function findDictionaryByLabel(label) {\n  return textDictionaries.find(d => d.label === label) || null;\n}\n\n/**\n * エントリを結合（重複排除あり）\n * @param {Array<string>} existing - 既存エントリ\n * @param {Array<string>} newEntries - 新規エントリ\n * @returns {Array<string>} 結合後のエントリ\n */\nexport function mergeEntries(existing, newEntries) {\n  const existingSet = new Set(existing);\n  const uniqueNew = newEntries.filter(entry => !existingSet.has(entry));\n  return [...existing, ...uniqueNew];\n}\n\n/**\n * テキスト辞書からマスキングルールを構築\n * @returns {Array<Object>} ルール配列\n */\nexport function buildTextDictionaryRules() {\n  const rules = [];\n\n  // 有効な辞書のみを対象\n  const enabledDicts = textDictionaries.filter(d => d.enabled);\n\n  enabledDicts.forEach((dict, index) => {\n    const normalizedLabel = dict.label.trim().replace(/\\s+/g, \"_\").toUpperCase();\n    const prefix = normalizedLabel.startsWith(\"CUSTOM_\")\n      ? normalizedLabel\n      : `CUSTOM_${normalizedLabel}`;\n    const customLabel = `Custom_${normalizedLabel}`;\n\n    // 各エントリを個別のルールとして追加\n    dict.entries.forEach((entry, entryIndex) => {\n      const pattern = escapeRegExp(entry);\n      rules.push({\n        name: `text_dict_${dict.id}_${entryIndex}`,\n        label: dict.label,\n        pattern: pattern,\n        enabled: dict.enabled,\n        isTextDictionary: true,\n        textDictId: dict.id,\n        priority: dict.priority,\n        orderInPriority: dict.orderInPriority,\n        prefix: prefix,\n        customLabel: customLabel\n      });\n    });\n  });\n\n  return rules;\n}\n\n/**\n * 初期化：LocalStorageから読み込み\n */\nexport function initTextDictionaries() {\n  const loaded = loadTextDictionaries();\n  setTextDictionaries(loaded);\n}\n","/**\n * Text Dictionary UI Module - テキスト辞書のUI操作\n */\n\nimport { ui, updateStatusDisplay } from \"./ui.js\";\nimport { TEXT_DICT_MAX_ROWS_PER_LABEL } from \"./constants.js\";\nimport {\n  parseTXT,\n  parseCSV,\n  createTextDictionary,\n  updateTextDictionary,\n  deleteTextDictionary,\n  exportTextDictionary,\n  findDictionaryByLabel,\n  mergeEntries,\n  saveTextDictionaries,\n  initTextDictionaries\n} from \"./text-dictionary.js\";\nimport { textDictionaries, setTextDictionaries } from \"./state.js\";\n\nlet currentEditingId = null; // 編集中の辞書ID\n\n/**\n * テキスト辞書UI初期化\n */\nexport function initTextDictionaryUI() {\n  // LocalStorageから読み込み\n  initTextDictionaries();\n\n  // イベントリスナー設定\n  setupEventListeners();\n\n  // 一覧を描画\n  renderTextDictionaryList();\n}\n\n/**\n * イベントリスナー設定\n */\nfunction setupEventListeners() {\n  // [辞書の追加]ボタン\n  ui.textDictAddBtn?.addEventListener('click', () => {\n    showForm('add');\n  });\n\n  // [キャンセル]ボタン\n  ui.textDictCancelBtn?.addEventListener('click', () => {\n    hideForm();\n  });\n\n  // [登録]/[更新]ボタン\n  ui.textDictSubmitBtn?.addEventListener('click', () => {\n    if (currentEditingId) {\n      handleUpdate();\n    } else {\n      handleSubmit();\n    }\n  });\n\n  // 登録方法ラジオボタン\n  Array.from(ui.textDictInputModeRadios || []).forEach(radio => {\n    radio.addEventListener('change', () => {\n      updateFormVisibility();\n    });\n  });\n\n  // ファイル形式ラジオボタン\n  Array.from(ui.textDictFileFormatRadios || []).forEach(radio => {\n    radio.addEventListener('change', () => {\n      updateFormVisibility();\n    });\n  });\n}\n\n/**\n * フォーム表示・非表示の更新\n */\nfunction updateFormVisibility() {\n  const inputMode = getSelectedInputMode();\n  const fileFormat = getSelectedFileFormat();\n\n  if (inputMode === 'textarea') {\n    // テキストエリア入力\n    ui.textDictFileFormatRow.hidden = true;\n    ui.textDictFileRow.hidden = true;\n    ui.textDictTextareaRow.hidden = false;\n    ui.textDictLabel.disabled = false; // ラベル名必須\n  } else {\n    // ファイルから登録\n    ui.textDictFileFormatRow.hidden = false;\n    ui.textDictFileRow.hidden = false;\n    ui.textDictTextareaRow.hidden = true;\n\n    if (fileFormat === 'csv') {\n      ui.textDictLabel.disabled = true; // CSV時はラベル名グレーアウト\n    } else {\n      ui.textDictLabel.disabled = false; // TXT時はラベル名必須\n    }\n  }\n}\n\n/**\n * 選択中の登録方法を取得\n */\nfunction getSelectedInputMode() {\n  const checked = Array.from(ui.textDictInputModeRadios || []).find(r => r.checked);\n  return checked ? checked.value : 'textarea';\n}\n\n/**\n * 選択中のファイル形式を取得\n */\nfunction getSelectedFileFormat() {\n  const checked = Array.from(ui.textDictFileFormatRadios || []).find(r => r.checked);\n  return checked ? checked.value : 'txt';\n}\n\n/**\n * フォームを表示\n * @param {string} mode - 'add' | 'edit'\n * @param {Object} dict - 編集時の辞書オブジェクト\n */\nfunction showForm(mode, dict = null) {\n  currentEditingId = dict ? dict.id : null;\n\n  if (mode === 'edit' && dict) {\n    ui.textDictFormTitle.textContent = '辞書の編集';\n    ui.textDictSubmitBtn.textContent = '更新';\n    ui.textDictLabel.value = dict.label;\n    ui.textDictPriority.value = String(dict.priority);\n    ui.textDictContent.value = dict.entries.join('\\n');\n\n    // 編集時は常にテキストエリアモード\n    const textareaRadio = Array.from(ui.textDictInputModeRadios).find(r => r.value === 'textarea');\n    if (textareaRadio) textareaRadio.checked = true;\n  } else {\n    ui.textDictFormTitle.textContent = '辞書の追加';\n    ui.textDictSubmitBtn.textContent = '登録';\n    ui.textDictLabel.value = '';\n    ui.textDictPriority.value = '3';\n    ui.textDictContent.value = '';\n    ui.textDictFileInput.value = '';\n\n    // デフォルトはテキストエリアモード\n    const textareaRadio = Array.from(ui.textDictInputModeRadios).find(r => r.value === 'textarea');\n    if (textareaRadio) textareaRadio.checked = true;\n  }\n\n  updateFormVisibility();\n  ui.textDictForm.hidden = false;\n}\n\n/**\n * フォームを非表示\n */\nfunction hideForm() {\n  ui.textDictForm.hidden = true;\n  currentEditingId = null;\n}\n\n/**\n * 登録処理\n */\nasync function handleSubmit() {\n  try {\n    const inputMode = getSelectedInputMode();\n    const fileFormat = getSelectedFileFormat();\n    const label = ui.textDictLabel.value.trim();\n    const priority = Number.parseInt(ui.textDictPriority.value, 10);\n\n    let entries = [];\n\n    if (inputMode === 'textarea') {\n      // テキストエリア入力（TXT）\n      if (!label) {\n        updateStatusDisplay('ラベル名を入力してください', true);\n        return;\n      }\n      const content = ui.textDictContent.value;\n      if (!content.trim()) {\n        updateStatusDisplay('内容を入力してください', true);\n        return;\n      }\n      entries = parseTXT(content);\n    } else {\n      // ファイルから登録\n      const file = ui.textDictFileInput.files[0];\n      if (!file) {\n        updateStatusDisplay('ファイルを選択してください', true);\n        return;\n      }\n\n      const content = await readFileAsText(file);\n\n      if (fileFormat === 'txt') {\n        // TXT形式\n        if (!label) {\n          updateStatusDisplay('ラベル名を入力してください', true);\n          return;\n        }\n        entries = parseTXT(content);\n      } else {\n        // CSV形式\n        const result = parseCSV(content);\n        if (!result.valid) {\n          updateStatusDisplay(`CSVエラー:\\n${result.errors.join('\\n')}`, true);\n          return;\n        }\n\n        // CSVの場合、複数ラベルで複数レコード作成\n        for (const [csvLabel, csvEntries] of result.data.entries()) {\n          await handleSingleLabelSubmit(csvLabel, csvEntries, priority);\n        }\n\n        hideForm();\n        renderTextDictionaryList();\n        updateStatusDisplay(`${result.data.size}個の辞書を登録しました`);\n        return;\n      }\n    }\n\n    // 単一ラベルの登録\n    await handleSingleLabelSubmit(label, entries, priority);\n    hideForm();\n    renderTextDictionaryList();\n    updateStatusDisplay(`辞書「${label}」を登録しました`);\n  } catch (err) {\n    console.error('Registration error:', err);\n    updateStatusDisplay(`登録エラー: ${err.message}`, true);\n  }\n}\n\n/**\n * 単一ラベルの登録処理（同名チェック含む）\n */\nasync function handleSingleLabelSubmit(label, entries, priority) {\n  // 行数チェック\n  if (entries.length > TEXT_DICT_MAX_ROWS_PER_LABEL) {\n    throw new Error(`ラベル「${label}」の行数が上限（${TEXT_DICT_MAX_ROWS_PER_LABEL.toLocaleString()}行）を超えています: ${entries.length.toLocaleString()}行`);\n  }\n\n  // 同名チェック\n  const existing = findDictionaryByLabel(label);\n  if (existing) {\n    const action = await askUserAction(label);\n    if (action === 'skip') {\n      return; // スキップ\n    } else if (action === 'overwrite') {\n      // 上書き: 既存削除→新規作成\n      deleteTextDictionary(existing.id);\n      const newDict = createTextDictionary(label, entries, priority);\n      textDictionaries.push(newDict);\n      saveTextDictionaries(textDictionaries);\n    } else if (action === 'merge') {\n      // 結合: 重複排除して追加\n      const merged = mergeEntries(existing.entries, entries);\n      updateTextDictionary(existing.id, { entries: merged });\n    }\n  } else {\n    // 新規作成\n    const newDict = createTextDictionary(label, entries, priority);\n    textDictionaries.push(newDict);\n    saveTextDictionaries(textDictionaries);\n  }\n}\n\n/**\n * 同名ラベル時のユーザー選択\n */\nfunction askUserAction(label) {\n  return new Promise((resolve) => {\n    const message = `ラベル「${label}」は既に存在します。\\n\\n上書き: 既存を削除して新規作成\\nスキップ: インポート中止\\n結合: 既存に追加（重複排除）`;\n    const result = window.prompt(message + '\\n\\n「overwrite」「skip」「merge」のいずれかを入力してください:', 'skip');\n\n    if (result === 'overwrite' || result === 'merge' || result === 'skip') {\n      resolve(result);\n    } else {\n      resolve('skip');\n    }\n  });\n}\n\n/**\n * 更新処理\n */\nfunction handleUpdate() {\n  try {\n    const label = ui.textDictLabel.value.trim();\n    const priority = Number.parseInt(ui.textDictPriority.value, 10);\n    const content = ui.textDictContent.value;\n\n    if (!label) {\n      updateStatusDisplay('ラベル名を入力してください', true);\n      return;\n    }\n\n    if (!content.trim()) {\n      updateStatusDisplay('内容を入力してください', true);\n      return;\n    }\n\n    const entries = parseTXT(content);\n\n    if (entries.length > TEXT_DICT_MAX_ROWS_PER_LABEL) {\n      updateStatusDisplay(`行数が上限（${TEXT_DICT_MAX_ROWS_PER_LABEL.toLocaleString()}行）を超えています: ${entries.length.toLocaleString()}行`, true);\n      return;\n    }\n\n    const success = updateTextDictionary(currentEditingId, { label, priority, entries });\n    if (success) {\n      hideForm();\n      renderTextDictionaryList();\n      updateStatusDisplay(`辞書「${label}」を更新しました`);\n    } else {\n      updateStatusDisplay('更新に失敗しました', true);\n    }\n  } catch (err) {\n    console.error('Update error:', err);\n    updateStatusDisplay(`更新エラー: ${err.message}`, true);\n  }\n}\n\n/**\n * ファイルをテキストとして読み込み\n */\nfunction readFileAsText(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = (e) => resolve(e.target.result);\n    reader.onerror = () => reject(new Error('ファイル読み込みエラー'));\n    reader.readAsText(file, 'UTF-8');\n  });\n}\n\n/**\n * テキスト辞書一覧を描画\n */\nexport function renderTextDictionaryList() {\n  if (!ui.textDictList) return;\n\n  ui.textDictList.innerHTML = '';\n\n  if (textDictionaries.length === 0) {\n    ui.textDictListEmpty.hidden = false;\n    return;\n  }\n\n  ui.textDictListEmpty.hidden = true;\n\n  // 優先度でグループ化\n  const groups = new Map();\n  for (let priority = 1; priority <= 5; priority++) {\n    groups.set(priority, []);\n  }\n\n  textDictionaries.forEach(dict => {\n    groups.get(dict.priority).push(dict);\n  });\n\n  // 各優先度グループを描画\n  for (const [priority, dicts] of groups.entries()) {\n    if (dicts.length === 0) continue;\n\n    // 優先度ラベル\n    const priorityLabel = getPriorityLabel(priority);\n    const groupHeader = document.createElement('div');\n    groupHeader.className = 'text-dict-group-header';\n    groupHeader.textContent = `優先度${priority}${priorityLabel}グループ`;\n\n    ui.textDictList.appendChild(groupHeader);\n\n    // orderInPriorityでソート\n    dicts.sort((a, b) => a.orderInPriority - b.orderInPriority);\n\n    // 各辞書を描画\n    dicts.forEach(dict => {\n      const item = createDictItem(dict);\n      ui.textDictList.appendChild(item);\n    });\n  }\n}\n\n/**\n * 優先度ラベルを取得\n */\nfunction getPriorityLabel(priority) {\n  if (priority === 1) return '(High)';\n  if (priority === 3) return '(Mid)';\n  if (priority === 5) return '(Low)';\n  return '';\n}\n\n/**\n * 辞書アイテムを作成\n */\nfunction createDictItem(dict) {\n  const item = document.createElement('div');\n  item.className = 'text-dict-item';\n  item.dataset.id = dict.id;\n\n  const handle = document.createElement('span');\n  handle.className = 'text-dict-handle';\n  handle.textContent = '⋮⋮';\n\n  const checkbox = document.createElement('input');\n  checkbox.type = 'checkbox';\n  checkbox.checked = dict.enabled;\n  checkbox.addEventListener('change', () => {\n    updateTextDictionary(dict.id, { enabled: checkbox.checked });\n    updateStatusDisplay(`辞書「${dict.label}」を${checkbox.checked ? '有効' : '無効'}にしました`);\n  });\n\n  const label = document.createElement('strong');\n  label.textContent = `${dict.label} (${dict.entries.length.toLocaleString()}件)`;\n\n  const actions = document.createElement('div');\n  actions.className = 'text-dict-actions';\n\n  const editBtn = document.createElement('button');\n  editBtn.type = 'button';\n  editBtn.className = 'ghost small';\n  editBtn.textContent = '編集';\n  editBtn.addEventListener('click', () => {\n    showForm('edit', dict);\n  });\n\n  const exportBtn = document.createElement('button');\n  exportBtn.type = 'button';\n  exportBtn.className = 'ghost small';\n  exportBtn.textContent = 'エクスポート';\n  exportBtn.addEventListener('click', () => {\n    handleExport(dict.id);\n  });\n\n  const deleteBtn = document.createElement('button');\n  deleteBtn.type = 'button';\n  deleteBtn.className = 'ghost small';\n  deleteBtn.textContent = '削除';\n  deleteBtn.addEventListener('click', () => {\n    handleDelete(dict.id, dict.label);\n  });\n\n  actions.appendChild(editBtn);\n  actions.appendChild(exportBtn);\n  actions.appendChild(deleteBtn);\n\n  item.appendChild(handle);\n  item.appendChild(checkbox);\n  item.appendChild(label);\n  item.appendChild(actions);\n\n  return item;\n}\n\n/**\n * エクスポート処理\n */\nfunction handleExport(id) {\n  const result = exportTextDictionary(id);\n  if (!result) {\n    updateStatusDisplay('エクスポートに失敗しました', true);\n    return;\n  }\n\n  const blob = new Blob([result.content], { type: 'text/plain;charset=utf-8' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = result.filename;\n  a.click();\n  URL.revokeObjectURL(url);\n\n  updateStatusDisplay(`${result.filename} をダウンロードしました`);\n}\n\n/**\n * 削除処理\n */\nfunction handleDelete(id, label) {\n  if (!window.confirm(`辞書「${label}」を削除しますか？`)) {\n    return;\n  }\n\n  const success = deleteTextDictionary(id);\n  if (success) {\n    renderTextDictionaryList();\n    updateStatusDisplay(`辞書「${label}」を削除しました`);\n  } else {\n    updateStatusDisplay('削除に失敗しました', true);\n  }\n}\n","/**\n * Main Entry Point - アプリケーションのエントリーポイント\n */\n\n// すべてのモジュールをインポート\nimport { ui, updateStatusDisplay } from \"./modules/ui.js\";\nimport { applyBrandConfig, getAppFilenameBase } from \"./modules/brand.js\";\nimport { initUnmaskFeatures, unmaskText, updateUnmaskDictStatus } from \"./modules/unmask.js\";\nimport { SAMPLE_DATA } from \"./modules/samples.js\";\nimport * as stateVars from \"./modules/state.js\";\nimport {\n  state,\n  buildStatePayload,\n  persistState,\n  restoreState,\n  setCurrentMaskDictionary,\n  setCurrentUnmaskDictionary,\n} from \"./modules/state.js\";\nimport {\n  baseRules,\n  renderRules,\n  toggleAllRules,\n  resetRuleOrder,\n  regenerateSessionId,\n  updateSessionIdControls,\n} from \"./modules/rules.js\";\nimport {\n  readDictRows,\n  renderDictRows,\n  addDictRow,\n  importBasicRulesToDict,\n  buildDictionaryRules,\n} from \"./modules/dictionary.js\";\nimport {\n  loadAddressDict,\n  loadTownAddressDict,\n  renderAddressPrefectureFilters,\n  updateAddressDict,\n  resetAddressDict,\n  renderAddressSearchResults,\n  handlePrefectureSelectionChange,\n  setAllPrefecturesSelection,\n  buildAddressRules,\n} from \"./modules/address.js\";\nimport {\n  renderPresetOptions,\n  savePreset,\n  savePresetWithPayload,\n  loadPreset,\n  deletePreset,\n  resolveExportName,\n} from \"./modules/preset.js\";\nimport {\n  exportPresetToFile,\n  importPresetFromFile,\n  saveMaskedOutput,\n  savePlainOutput,\n  loadPlainTextFile,\n  copyOutput,\n} from \"./modules/io.js\";\nimport { maskText, scheduleMask } from \"./modules/masking.js\";\nimport { initTextDictionaryUI, renderTextDictionaryList } from \"./modules/text-dictionary-ui.js\";\nimport { buildTextDictionaryRules } from \"./modules/text-dictionary.js\";\n\n/**\n * 入力欄をクリア\n */\nfunction clearInput() {\n  ui.inputText.value = \"\";\n  ui.outputText.value = \"\";\n  if (ui.sampleSelect) {\n    ui.sampleSelect.value = \"\";\n  }\n  updateStatusDisplay(\"\");\n  persistState(readDictRows);\n  setCurrentMaskDictionary(null);\n  setCurrentUnmaskDictionary(null);\n  updateUnmaskDictStatus(null);\n}\n\n/**\n * テキストエリアの高さを同期\n */\nfunction initTextareaSync() {\n  if (!ui.inputText || !ui.outputText) {\n    return;\n  }\n  let syncing = false;\n  const applyHeight = (source, target) => {\n    if (syncing) {\n      return;\n    }\n    syncing = true;\n    target.style.height = `${source.offsetHeight}px`;\n    syncing = false;\n  };\n\n  if (typeof ResizeObserver !== \"undefined\") {\n    const observer = new ResizeObserver((entries) => {\n      entries.forEach((entry) => {\n        if (entry.target === ui.inputText) {\n          applyHeight(ui.inputText, ui.outputText);\n        } else if (entry.target === ui.outputText) {\n          applyHeight(ui.outputText, ui.inputText);\n        }\n      });\n    });\n    observer.observe(ui.inputText);\n    observer.observe(ui.outputText);\n  } else {\n    ui.inputText.addEventListener(\"mouseup\", () =>\n      applyHeight(ui.inputText, ui.outputText)\n    );\n    ui.outputText.addEventListener(\"mouseup\", () =>\n      applyHeight(ui.outputText, ui.inputText)\n    );\n    ui.inputText.addEventListener(\"touchend\", () =>\n      applyHeight(ui.inputText, ui.outputText)\n    );\n    ui.outputText.addEventListener(\"touchend\", () =>\n      applyHeight(ui.outputText, ui.inputText)\n    );\n  }\n}\n\n/**\n * テキストエリアのスクロールを同期\n */\nfunction initScrollSync() {\n  if (!ui.inputText || !ui.outputText) {\n    return;\n  }\n  let syncing = false;\n  const syncScroll = (source, target) => {\n    if (syncing) {\n      return;\n    }\n    syncing = true;\n    target.scrollTop = source.scrollTop;\n    target.scrollLeft = source.scrollLeft;\n    syncing = false;\n  };\n\n  ui.inputText.addEventListener(\"scroll\", () =>\n    syncScroll(ui.inputText, ui.outputText)\n  );\n  ui.outputText.addEventListener(\"scroll\", () =>\n    syncScroll(ui.outputText, ui.inputText)\n  );\n}\n\n/**\n * タブの切り替えを初期化\n */\nfunction initTabs() {\n  ui.tabs.forEach((tab) => {\n    tab.addEventListener(\"click\", () => {\n      const target = tab.dataset.tab;\n      ui.tabs.forEach((btn) => {\n        btn.classList.toggle(\"is-active\", btn === tab);\n        btn.setAttribute(\"aria-selected\", btn === tab ? \"true\" : \"false\");\n      });\n      ui.tabPanels.forEach((panel) => {\n        panel.classList.toggle(\"is-active\", panel.dataset.tabPanel === target);\n      });\n      if (ui.appStats) {\n        ui.appStats.classList.toggle(\"is-hidden\", target !== \"work\");\n      }\n      if (target !== \"work\") {\n        updateStatusDisplay(\"\");\n      }\n    });\n  });\n}\n\n/**\n * プリセットパネルの開閉\n * @param {boolean} isOpen - 開くかどうか\n */\nfunction setPresetPanelOpen(isOpen) {\n  if (!ui.presetDock || !ui.presetToggle || !ui.presetPanel) {\n    return;\n  }\n  ui.presetDock.classList.toggle(\"is-open\", Boolean(isOpen));\n  ui.presetToggle.setAttribute(\"aria-expanded\", isOpen ? \"true\" : \"false\");\n  ui.presetPanel.setAttribute(\"aria-hidden\", isOpen ? \"false\" : \"true\");\n}\n\n/**\n * アプリケーション初期化\n */\nfunction init() {\n  // ブランド設定を適用\n  applyBrandConfig();\n\n  // state.rules を baseRules で初期化\n  state.rules = baseRules.map((rule) => ({ ...rule, enabled: true }));\n\n  // 状態の復元\n  const { dictRowsData, needsRulesRender } = restoreState(baseRules);\n\n  // 辞書行の復元\n  if (ui.dictRows && ui.dictRows.children.length === 0) {\n    renderDictRows(dictRowsData || [], scheduleMask);\n  }\n\n  // ルールの描画\n  renderRules(readDictRows, scheduleMask);\n\n  // プリセットオプションの描画\n  renderPresetOptions();\n\n  // 住所都道府県フィルターの描画\n  renderAddressPrefectureFilters();\n\n  // 住所辞書の初期化\n  loadAddressDict();\n  loadTownAddressDict();\n\n  // テキスト辞書の初期化\n  initTextDictionaryUI();\n\n  // マスク/マスク解除ボタン\n  if (ui.maskForwardBtn) {\n    ui.maskForwardBtn.addEventListener(\"click\", () => maskText(buildDictionaryRules, buildAddressRules, buildTextDictionaryRules));\n  }\n  if (ui.unmaskBackwardBtn) {\n    ui.unmaskBackwardBtn.addEventListener(\"click\", () => {\n      unmaskText(stateVars.currentUnmaskDictionary);\n    });\n  }\n\n  // コピー/クリアボタン\n  if (ui.copyBtn) {\n    ui.copyBtn.addEventListener(\"click\", copyOutput);\n  }\n  if (ui.clearBtn) {\n    ui.clearBtn.addEventListener(\"click\", clearInput);\n  }\n\n  // テキストエリア同期\n  initTextareaSync();\n  initScrollSync();\n\n  // サンプル選択\n  if (ui.sampleSelect) {\n    ui.sampleSelect.addEventListener(\"change\", () => {\n      const key = ui.sampleSelect.value;\n      if (key && SAMPLE_DATA[key]) {\n        ui.inputText.value = SAMPLE_DATA[key];\n        persistState(readDictRows);\n      }\n    });\n  }\n\n  // プリセット管理\n  ui.presetSave.addEventListener(\"click\", () =>\n    savePreset(readDictRows)\n  );\n  ui.presetLoad.addEventListener(\"click\", () =>\n    loadPreset(\n      baseRules,\n      renderRules,\n      renderDictRows,\n      readDictRows,\n      scheduleMask\n    )\n  );\n  ui.presetDelete.addEventListener(\"click\", deletePreset);\n  ui.presetExport.addEventListener(\"click\", () =>\n    exportPresetToFile(resolveExportName, readDictRows)\n  );\n  ui.presetImport.addEventListener(\"click\", () => ui.presetImportFile.click());\n  ui.presetImportFile.addEventListener(\"change\", () => {\n    importPresetFromFile(\n      ui.presetImportFile.files?.[0],\n      baseRules,\n      renderRules,\n      renderDictRows,\n      readDictRows,\n      scheduleMask\n    );\n  });\n  ui.presetSelect.addEventListener(\"change\", () => {\n    ui.presetName.value = ui.presetSelect.value;\n  });\n\n  // 入力テキスト変更時\n  ui.inputText.addEventListener(\"input\", () => {\n    persistState(readDictRows);\n  });\n\n  // ランダムセッションID設定\n  if (ui.useRandomSessionId) {\n    ui.useRandomSessionId.addEventListener(\"change\", () => {\n      updateSessionIdControls();\n      persistState(readDictRows);\n      scheduleMask();\n    });\n  }\n  if (ui.regenSessionId) {\n    ui.regenSessionId.addEventListener(\"click\", () =>\n      regenerateSessionId(maskText)\n    );\n  }\n\n  // 保存ボタン\n  if (ui.saveMaskedTextBtn) {\n    ui.saveMaskedTextBtn.addEventListener(\"click\", saveMaskedOutput);\n  }\n  if (ui.savePlainTextBtn) {\n    ui.savePlainTextBtn.addEventListener(\"click\", savePlainOutput);\n  }\n\n  // テキストファイル読み込み\n  if (ui.plainTextUploadBtn && ui.plainTextFile) {\n    ui.plainTextUploadBtn.addEventListener(\"click\", () => {\n      ui.plainTextFile.click();\n    });\n    ui.plainTextFile.addEventListener(\"change\", () => {\n      loadPlainTextFile(ui.plainTextFile.files?.[0], readDictRows);\n      ui.plainTextFile.value = \"\";\n    });\n  }\n\n  // 辞書管理\n  if (ui.dictAddRow) {\n    ui.dictAddRow.addEventListener(\"click\", () => {\n      addDictRow(\n        { enabled: true, prefix: \"\", pattern: \"\", regex: false },\n        scheduleMask\n      );\n    });\n  }\n  if (ui.dictImportBasic) {\n    ui.dictImportBasic.addEventListener(\"click\", () =>\n      importBasicRulesToDict(\n        renderRules,\n        scheduleMask,\n        savePresetWithPayload,\n        buildStatePayload\n      )\n    );\n  }\n  ui.dictDefaultPrefix.addEventListener(\"input\", () => {\n    persistState(readDictRows);\n    scheduleMask();\n  });\n\n  // ルール管理\n  ui.toggleAllBtn.addEventListener(\"click\", () =>\n    toggleAllRules(readDictRows, scheduleMask)\n  );\n  ui.resetOrderBtn.addEventListener(\"click\", () =>\n    resetRuleOrder(readDictRows, scheduleMask)\n  );\n\n  // 住所辞書のイベントリスナー\n  if (ui.useAddressDict) {\n    ui.useAddressDict.addEventListener(\"change\", scheduleMask);\n  }\n  if (ui.updateAddressDict) {\n    ui.updateAddressDict.addEventListener(\"click\", () =>\n      updateAddressDict()\n    );\n  }\n  if (ui.resetAddressDict) {\n    ui.resetAddressDict.addEventListener(\"click\", () =>\n      resetAddressDict(scheduleMask)\n    );\n  }\n  if (ui.addressSearchInput) {\n    ui.addressSearchInput.addEventListener(\"input\", () => {\n      renderAddressSearchResults();\n    });\n  }\n  if (ui.addressPrefectureList) {\n    ui.addressPrefectureList.addEventListener(\"change\", (event) => {\n      const target = event.target;\n      if (target instanceof HTMLInputElement && target.dataset.prefecture) {\n        handlePrefectureSelectionChange(\n          target.dataset.prefecture,\n          target.checked,\n          scheduleMask\n        );\n      }\n    });\n  }\n  if (ui.addressPrefAll) {\n    ui.addressPrefAll.addEventListener(\"click\", () => {\n      setAllPrefecturesSelection(true, scheduleMask);\n    });\n  }\n  if (ui.addressPrefNone) {\n    ui.addressPrefNone.addEventListener(\"click\", () => {\n      setAllPrefecturesSelection(false, scheduleMask);\n    });\n  }\n\n  // プリセットパネル\n  if (ui.presetToggle) {\n    ui.presetToggle.addEventListener(\"click\", () => {\n      const isOpen = ui.presetDock?.classList.contains(\"is-open\");\n      setPresetPanelOpen(!isOpen);\n    });\n  }\n  if (ui.presetClose) {\n    ui.presetClose.addEventListener(\"click\", () => {\n      setPresetPanelOpen(false);\n    });\n  }\n\n  // 状態保存とマスク実行\n  persistState(readDictRows);\n  scheduleMask();\n\n  // タブ初期化\n  initTabs();\n\n  // セッションIDコントロール更新\n  updateSessionIdControls();\n\n  // マスク解除機能の初期化\n  initUnmaskFeatures();\n}\n\n// DOMContentLoadedで初期化\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", init);\n} else {\n  init();\n}\n"],"names":["readDictRows","baseRules","resolveExportName","renderRules","renderDictRows","scheduleMask","stateVars.currentMaskDictionary","stateVars.currentUnmaskDictionary","maskText","savePreset","buildStatePayload","stateVars.addressTownPrefectures","stateVars.addressSelectedPrefs","stateVars.addressCityPatternsByPref","stateVars.addressTownPatternsByPref","stateVars.addressPatterns","stateVars.addressCityPatterns","stateVars.addressDictLoadPromise","stateVars.addressTownDictLoadPromise","stateVars.addressPatternChunks","buildDictionaryRules","buildAddressRules","buildTextDictionaryRules","stateVars.currentSessionId","stateVars.maskRunId"],"mappings":"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AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ,EAAI,KAAK,IAAI;AAAA,EACX,QAAQ;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;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"}